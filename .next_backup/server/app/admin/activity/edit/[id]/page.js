(()=>{var e={};e.id=5967,e.ids=[5967],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20775:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>m,routeModule:()=>c,tree:()=>d});var a=s(65239),r=s(48088),i=s(88170),l=s.n(i),n=s(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d={children:["",{children:["admin",{children:["activity",{children:["edit",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,89776)),"C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\admin\\activity\\edit\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,97786)),"C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,m=["C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\admin\\activity\\edit\\[id]\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},c=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/admin/activity/edit/[id]/page",pathname:"/admin/activity/edit/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},22090:(e,t,s)=>{Promise.resolve().then(s.bind(s,89776))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},74798:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(60687),r=s(81457),i=s(16189),l=s(43210),n=s(11860),o=s(34537),d=s(16345),m=s(85215);s(94360);var u=s(94928);function c(){let e=(0,i.useParams)(),t=e?.id,[s,c]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!0),[x,b]=(0,l.useState)(""),[g,f]=(0,l.useState)(""),[v,y]=(0,l.useState)(null),[j,N]=(0,l.useState)(null),[w,k]=(0,l.useState)([]),[A,S]=(0,l.useState)([]),[C,P]=(0,l.useState)([]),[E,q]=(0,l.useState)([]),[R,U]=(0,l.useState)(null),[_,F]=(0,l.useState)(null),[D,K]=(0,l.useState)({}),[$,G]=(0,l.useState)(!1),[I,M]=(0,l.useState)(""),[z,T]=(0,l.useState)("success"),[W,Z]=(0,l.useState)(!1),J=(0,i.useRouter)(),O=e=>{let t=e.target.files?.[0];if(t){y(t),U(null);let e=new FileReader;e.onloadend=()=>{N(e.result)},e.readAsDataURL(t)}},B=e=>{let t=e.target.files;if(t){let e=Array.from(t);if(w.length+C.length+e.length>4){F("Maksimal 4 gambar tambahan.");return}k(t=>[...t,...e]),e.forEach(e=>{let t=new FileReader;t.onloadend=()=>{S(e=>[...e,t.result])},t.readAsDataURL(e)})}},L=e=>{k(t=>t.filter((t,s)=>s!==e)),S(t=>t.filter((t,s)=>s!==e))},X=e=>{P(t=>t.filter(t=>t!==e))},H=async()=>{F(null),K({}),c(!0);try{let e=new FormData;e.append("title",x),e.append("content",g),e.append("retainedMedia",JSON.stringify(C)),v&&e.append("thumbnail",v),w.forEach(t=>e.append("media",t));let s=await (0,d.J0)(Number(t),e);s&&s.message&&(sessionStorage.setItem("popup",JSON.stringify({message:s.message,type:"success"})),J.push("/admin/activity"))}catch(e){"validation"===e.type?K(e.errors):(console.error("Error:",e),M(e.message||"Terjadi kesalahan saat memperbarui berita."),T("error"),G(!0))}finally{c(!1)}};return p?(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-6 bg-tertiary rounded-xl shadow-lg",children:[(0,a.jsx)(m.A,{height:32,width:200,className:"mb-4"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsx)("div",{className:"w-full md:w-2/3",children:(0,a.jsx)(m.A,{height:300,className:"mb-6"})}),(0,a.jsxs)("div",{className:"w-full md:w-1/3 space-y-6",children:[(0,a.jsx)(m.A,{height:48}),(0,a.jsx)(m.A,{height:160}),(0,a.jsx)(m.A,{height:220}),(0,a.jsx)(m.A,{height:40})]})]})]}):(0,a.jsxs)("div",{className:"mx-auto p-6 bg-tertiary rounded-xl shadow-lg",children:[$&&(0,a.jsx)(o.A,{message:I,type:z,onClose:()=>G(!1)}),(0,a.jsx)(u.A,{title:"Simpan Perubahan",description:"Apakah Anda yakin ingin mengubah berita? Pastikan informasi yang Anda masukkan sudah benar.",isOpen:W,isSubmitting:s,onClose:()=>{Z(!1)},onConfirm:H}),(0,a.jsx)("h1",{className:"text-lg font-medium mb-4",children:"Edit Kegiatan"}),_&&(0,a.jsx)("p",{className:"text-red-600 mb-4",children:_}),(0,a.jsxs)("form",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsx)("div",{className:"w-full md:w-2/3",children:(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("label",{className:"block mb-1 text-sm font-medium",children:"Konten Berita"}),(0,a.jsx)(r.A,{content:g,setContent:e=>{f(e),K(e=>({...e,content:""}))},maxCharacters:2110}),D.content&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:D.content})]})}),(0,a.jsxs)("div",{className:"w-full md:w-1/3",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block mb-1 text-sm font-medium",children:"Judul Berita"}),(0,a.jsx)("input",{type:"text",placeholder:"Judul Berita",value:x,onChange:e=>{b(e.target.value),K(e=>({...e,title:""}))},className:"w-full p-2 border border-gray-300 rounded-xl"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[x.length,"/90 karakter"]}),D.title&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:D.title})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block mb-1 text-sm font-medium",children:"Sampul Gambar"}),(0,a.jsxs)("div",{className:"border rounded-xl p-3 border-gray-300",children:[j?(0,a.jsx)("div",{className:"relative mb-3",children:(0,a.jsx)("img",{src:j,alt:"Thumbnail Preview",className:"w-full h-40 object-cover rounded-xl"})}):R?(0,a.jsx)("div",{className:"relative mb-3",children:(0,a.jsx)("img",{src:R,alt:"Current Thumbnail",className:"w-full h-40 object-cover rounded-xl"})}):(0,a.jsx)("div",{className:"border-dashed border-2 border-gray-300 bg-gray-100 rounded-xl flex items-center justify-center h-40 mb-3",children:(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Unggah Sampul"})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("label",{htmlFor:"thumbnail-upload",className:"cursor-pointer font-medium bg-primary text-white px-4 py-2 rounded-xl hover:-translate-y-1 duration-150 ease-in text-sm",children:"Pilih Gambar"}),(0,a.jsx)("input",{id:"thumbnail-upload",type:"file",accept:"image/*",onChange:e=>{O(e),K(e=>({...e,thumbnail:""}))},className:"hidden"})]}),D.thumbnail&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:D.thumbnail})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block mb-1 text-sm font-medium",children:"Gambar Tambahan (maks 4)"}),(0,a.jsxs)("div",{className:"border rounded-xl p-4 border-gray-300",children:[E.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-3",children:E.map((e,t)=>C.includes(e)&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e,alt:`Current Media ${t}`,className:"w-full h-24 object-cover rounded-xl"}),(0,a.jsx)("button",{type:"button",onClick:()=>X(e),className:"absolute top-1 right-1 bg-primary rounded-full p-1 shadow-lg",children:(0,a.jsx)(n.A,{size:14,className:"text-white"})})]},`current-${t}`))}),A.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-3",children:A.map((e,t)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e,alt:`Preview ${t+1}`,className:"w-full h-24 object-cover rounded-xl"}),(0,a.jsx)("button",{type:"button",onClick:()=>L(t),className:"absolute top-1 right-1 bg-primary rounded-full p-1 shadow-lg",children:(0,a.jsx)(n.A,{size:14,className:"text-white"})})]},`new-${t}`))}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("label",{htmlFor:"image-upload",className:`cursor-pointer bg-primary font-medium text-white text-sm px-4 py-2 rounded-xl hover:-translate-y-1 duration-150 ease-in ${w.length+C.length>=4?"opacity-50 pointer-events-none":""}`,children:"Tambah Gambar"}),(0,a.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",multiple:!0,onChange:e=>{B(e),F(null),K(e=>({...e,media:""}))},className:"hidden",disabled:w.length+C.length>=4})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[w.length+C.length,"/4 gambar terpilih"]}),D.media&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:D.media})]})]}),(0,a.jsx)("button",{type:"button",className:"cursor-pointer w-full bg-primary text-white py-2 px-4 text-sm font-medium rounded-xl hover:-translate-y-1 duration-150 ease-in flex justify-center items-center gap-2 disabled:opacity-50",onClick:()=>Z(!0),children:"Perbarui Berita"})]})]})]})}},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},85138:(e,t,s)=>{Promise.resolve().then(s.bind(s,74798))},85215:(e,t,s)=>{"use strict";s.d(t,{A:()=>i,z:()=>l});var a=s(43210);let r=a.createContext({});function i({count:e=1,wrapper:t,className:s,containerClassName:i,containerTestId:l,circle:n=!1,style:o,...d}){var m,u,c;let p=a.useContext(r),h={...d};for(let[e,t]of Object.entries(d))void 0===t&&delete h[e];let x={...p,...h,circle:n},b={...o,...function({baseColor:e,highlightColor:t,width:s,height:a,borderRadius:r,circle:i,direction:l,duration:n,enableAnimation:o=!0,customHighlightBackground:d}){let m={};return"rtl"===l&&(m["--animation-direction"]="reverse"),"number"==typeof n&&(m["--animation-duration"]=`${n}s`),o||(m["--pseudo-element-display"]="none"),("string"==typeof s||"number"==typeof s)&&(m.width=s),("string"==typeof a||"number"==typeof a)&&(m.height=a),("string"==typeof r||"number"==typeof r)&&(m.borderRadius=r),i&&(m.borderRadius="50%"),void 0!==e&&(m["--base-color"]=e),void 0!==t&&(m["--highlight-color"]=t),"string"==typeof d&&(m["--custom-highlight-background"]=d),m}(x)},g="react-loading-skeleton";s&&(g+=` ${s}`);let f=null!==(m=x.inline)&&void 0!==m&&m,v=[],y=Math.ceil(e);for(let t=0;t<y;t++){let s=b;if(y>e&&t===y-1){let t=null!==(u=s.width)&&void 0!==u?u:"100%",a=e%1,r="number"==typeof t?t*a:`calc(${t} * ${a})`;s={...s,width:r}}let r=a.createElement("span",{className:g,style:s,key:t},"â€Œ");f?v.push(r):v.push(a.createElement(a.Fragment,{key:t},r,a.createElement("br",null)))}return a.createElement("span",{className:i,"data-testid":l,"aria-live":"polite","aria-busy":null===(c=x.enableAnimation)||void 0===c||c},t?v.map((e,s)=>a.createElement(t,{key:s},e)):v)}function l({children:e,...t}){return a.createElement(r.Provider,{value:t},e)}},89776:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\IZUNA\\\\Documents\\\\github 4\\\\FE-Web-SekolahKopiRaisa\\\\app\\\\admin\\\\activity\\\\edit\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\admin\\activity\\edit\\[id]\\page.tsx","default")},94360:()=>{},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[6629,8707,54,7466],()=>s(20775));module.exports=a})();