(()=>{var e={};e.id=4914,e.ids=[4914],e.modules={818:(e,t,a)=>{Promise.resolve().then(a.bind(a,95665))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24750:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(60687),r=a(34537),l=a(43210),n=a(41862),i=a(16189),o=a(35044),d=a(14654);let m=async e=>{try{return(await d.A.post("/api/v1/report",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){if(e.response){let{data:t}=e.response;if(t.errors&&"object"==typeof t.errors)throw{type:"validation",message:t.message||"Validasi gagal!",errors:t.errors};if(t.errors&&"string"==typeof t.errors)throw{type:"general",message:t.errors};throw{type:"general",message:t.message||"Terjadi kesalahan!"}}throw{type:"network",message:"Tidak dapat terhubung ke server. Coba lagi nanti."}}},p=({name:e,options:t,value:a,onChange:r})=>(0,s.jsx)("div",{className:"flex flex-col gap-2",children:t.map(t=>(0,s.jsxs)("label",{className:"inline-flex items-center",children:[(0,s.jsx)("input",{type:"radio",name:e,value:t.value,checked:a===t.value,onChange:r,className:"mr-2 accent-amber-950"}),t.label]},t.value))});function c(){let[e,t]=(0,l.useState)({title:"",city:"",eventType:"",domParticipants:"",sumParticipants:"",date:"",duration:"",image:null}),[a,d]=(0,l.useState)({}),[c,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)(""),[g,b]=(0,l.useState)("success"),[f,y]=(0,l.useState)(!1),[v,j]=(0,l.useState)(!1),[N,k]=(0,l.useState)(null),P=(0,i.useRouter)(),[w,C]=(0,l.useState)(null),[S,q]=(0,l.useState)(null),A=(0,l.useRef)(null),K=e=>{let{name:s,value:r}=e.target;t(e=>({...e,[s]:r})),a[s]&&d(e=>{let t={...e};return delete t[s],t})},T=async t=>{t.preventDefault(),j(!0),k("");try{let t=new FormData;t.append("title",e.title),t.append("city",e.city),t.append("eventType",e.eventType),t.append("domParticipants",e.domParticipants),t.append("sumParticipants",e.sumParticipants),t.append("date",e.date),t.append("duration",e.duration),w&&t.append("productFile",w);let a=await m(t);a&&a.message&&(sessionStorage.setItem("popup",JSON.stringify({message:a.message,type:"success"})),P.push("/admin/report"))}catch(e){"validation"===e.type?d(e.errors):(console.error("Error:",e),h(e.message||"Terjadi kesalahan saat menyimpan berita."),b("error"),u(!0))}finally{j(!1)}};return(0,s.jsxs)("div",{className:"container mx-auto bg-tertiary p-4 sm:p-6 rounded-lg shadow-md",children:[c&&(0,s.jsx)(r.A,{message:x,type:g,onClose:()=>u(!1)}),(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Buat Laporan Baru"}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,s.jsx)("form",{onSubmit:T,className:"w-full lg:w-2/3 text-sm",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama P4S"}),(0,s.jsx)("input",{type:"text",name:"title",value:e.title,onChange:K,className:"w-full p-1.5 px-3 border border-gray-300 rounded-xl",placeholder:"Masukkan nama P4S"}),a.title&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:a.title})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kota/Kabupaten"}),(0,s.jsx)("input",{type:"text",name:"city",value:e.city,onChange:K,className:"w-full p-1.5 px-3 border border-gray-300 rounded-xl",placeholder:"Masukkan kota/kabupaten"}),a.city&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:a.city})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jenis Kegiatan"}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsx)(p,{name:"eventType",options:[{value:"Pelatihan",label:"Pelatihan"},{value:"Magang",label:"Magang"},{value:"Undangan Narasumber",label:"Undangan Narasumber"},{value:"PKL",label:"PKL"},{value:"Kunjungan",label:"Kunjungan"}],value:e.eventType,onChange:K})}),a.eventType&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:a.eventType})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asal Peserta"}),(0,s.jsx)("input",{type:"text",name:"domParticipants",value:e.domParticipants,onChange:K,className:"w-full p-1.5 px-3 border border-gray-300 rounded-xl",placeholder:"Masukkan asal peserta"}),a.domParticipants&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:a.domParticipants})]}),(0,s.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jumlah Peserta"}),(0,s.jsx)("input",{type:"number",name:"sumParticipants",value:e.sumParticipants,onChange:K,className:"w-full p-1.5 px-3 border border-gray-300 rounded-xl",placeholder:"Masukkan jumlah peserta"}),a.sumParticipants&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:a.sumParticipants})]})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Kegiatan"}),(0,s.jsx)("input",{type:"date",name:"date",value:e.date,onChange:K,className:"w-full p-1.5 px-3 border border-gray-300 rounded-xl",placeholder:"Pilih tanggal kegiatan"}),a.date&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:a.date})]}),(0,s.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lama Pelaksanaan"}),(0,s.jsx)("input",{type:"text",name:"duration",value:e.duration,onChange:K,className:"w-full p-1.5 px-3 border border-gray-300 rounded-xl",placeholder:"Masukkan lama pelaksanaan (misal: 2 jam)"}),a.duration&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:a.duration})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Foto Kegiatan"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>A.current?.click(),className:"cursor-pointer font-medium bg-primary text-white px-3 py-1.5 rounded-xl hover:-translate-y-1 duration-150 ease-in text-sm",children:"Pilih Gambar"}),(0,s.jsx)("span",{className:"text-sm text-gray-500 break-all",children:w?w.name:"Belum ada gambar dipilih"}),(0,s.jsx)("input",{type:"file",ref:A,onChange:e=>{let t=e.target.files?.[0];if(t){C(t);let e=new FileReader;e.onloadend=()=>{q(e.result)},e.readAsDataURL(t)}},accept:"image/*",className:"hidden"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Format: JPG, PNG. Maksimal 2MB."}),a.productFile&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:a.productFile})]})]})}),(0,s.jsxs)("div",{className:"w-full lg:w-1/3 max-w-100 mt-8 lg:mt-0",children:[(0,s.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Pratinjau Gambar"}),(0,s.jsx)(o.A,{title:e.title,city:e.city,date:e.date,eventType:e.eventType,image:S||"/assets/noimage.png"})]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end",children:(0,s.jsx)("button",{type:"submit",disabled:v,className:"cursor-pointer bg-primary text-white py-2 px-3 text-sm font-medium rounded-xl hover:-translate-y-1 duration-150 ease-in flex justify-center items-center gap-2 disabled:opacity-50",children:v?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{className:"animate-spin w-4 h-4"}),"Memproses..."]}):"Simpan Laporan"})})]})}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},40730:(e,t,a)=>{Promise.resolve().then(a.bind(a,24750))},46739:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>m,routeModule:()=>c,tree:()=>d});var s=a(65239),r=a(48088),l=a(88170),n=a.n(l),i=a(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d={children:["",{children:["admin",{children:["report",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,95665)),"C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\admin\\report\\create\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,97786)),"C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,m=["C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\admin\\report\\create\\page.tsx"],p={require:a,loadChunk:()=>Promise.resolve()},c=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/admin/report/create/page",pathname:"/admin/report/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")},95665:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\IZUNA\\\\Documents\\\\github 4\\\\FE-Web-SekolahKopiRaisa\\\\app\\\\admin\\\\report\\\\create\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\admin\\report\\create\\page.tsx","default")}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[6629,54,8999],()=>a(46739));module.exports=s})();