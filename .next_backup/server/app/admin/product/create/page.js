(()=>{var e={};e.id=7355,e.ids=[7355],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4839:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),a=r(48088),i=r(88170),n=r.n(i),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["admin",{children:["product",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,50596)),"C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\admin\\product\\create\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,97786)),"C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\admin\\product\\create\\page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/product/create/page",pathname:"/admin/product/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27256:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a,v:()=>s});let s=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e),a=e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33315:(e,t,r)=>{Promise.resolve().then(r.bind(r,50596))},33873:e=>{"use strict";e.exports=require("path")},48137:(e,t,r)=>{"use strict";r.d(t,{DD:()=>l,WY:()=>n,Xb:()=>a,eH:()=>i,vc:()=>o});var s=r(14654);let a=async()=>{try{return(await s.A.get("/api/v1/product")).data}catch(e){if(e.response){let{data:t}=e.response;if(t.errors&&"object"==typeof t.errors)throw{type:"validation",message:t.message||"Validasi gagal!",errors:t.errors};if(t.errors&&"string"==typeof t.errors)throw{type:"general",message:t.errors};throw{type:"general",message:t.message||"Terjadi kesalahan!"}}throw{type:"network",message:"Tidak dapat terhubung ke server. Coba lagi nanti."}}},i=async e=>{try{return(await s.A.get(`/api/v1/product/${e}`)).data}catch(e){if(e.response){let{data:t}=e.response;if(t.errors&&"object"==typeof t.errors)throw{type:"validation",message:t.message||"Validasi gagal!",errors:t.errors};if(t.errors&&"string"==typeof t.errors)throw{type:"general",message:t.errors};throw{type:"general",message:t.message||"Terjadi kesalahan!"}}throw{type:"network",message:"Tidak dapat terhubung ke server. Coba lagi nanti."}}},n=async e=>{try{return(await s.A.post("/api/v1/product",e,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){if(e.response){let{data:t}=e.response;if(t.errors&&"object"==typeof t.errors)throw{type:"validation",message:t.message||"Validasi gagal!",errors:t.errors};if(t.errors&&"string"==typeof t.errors)throw{type:"general",message:t.errors};throw{type:"general",message:t.message||"Terjadi kesalahan!"}}throw{type:"network",message:"Tidak dapat terhubung ke server. Coba lagi nanti."}}},o=async(e,t)=>{try{return(await s.A.put(`/api/v1/product/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){if(e.response){let{data:t}=e.response;if(t.errors&&"object"==typeof t.errors)throw{type:"validation",message:t.message||"Validasi gagal!",errors:t.errors};if(t.errors&&"string"==typeof t.errors)throw{type:"general",message:t.errors};throw{type:"general",message:t.message||"Terjadi kesalahan!"}}throw{type:"network",message:"Tidak dapat terhubung ke server. Coba lagi nanti."}}},l=async e=>(await s.A.delete(`/api/v1/product/${e}`)).data},50596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\IZUNA\\\\Documents\\\\github 4\\\\FE-Web-SekolahKopiRaisa\\\\app\\\\admin\\\\product\\\\create\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\IZUNA\\Documents\\github 4\\FE-Web-SekolahKopiRaisa\\app\\admin\\product\\create\\page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63143:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},88941:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(60687),a=r(63143),i=r(96362),n=r(27256);function o({id:e,name:t,image:r,price:o,stock:l,weight:d,sold:c,partner:m,onView:p,onEdit:u,onDelete:x}){return(0,s.jsxs)("div",{className:"cursor-pointer rounded-xl overflow-hidden shadow-lg border border-gray-300 p-3 flex flex-col justify-between bg-tertiary relative",children:[(0,s.jsx)("div",{className:"absolute top-3 left-3 z-10",children:(0,s.jsx)("span",{className:`px-2 py-1 rounded-xl text-xs ${(l??0)>0?"bg-green-200 text-green-800":"bg-red-200 text-red-800"}`,children:(l??0)>0?"Tersedia":"Habis"})}),(0,s.jsx)("img",{src:r,alt:t,className:"h-50 object-cover rounded-xl"}),(0,s.jsxs)("div",{className:"mt-3 flex flex-col justify-between flex-grow text-sm",children:[(0,s.jsx)("div",{onClick:()=>p?.(e??0),className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("h2",{className:"font-medium text-black leading-snug",children:t}),(0,s.jsx)("p",{className:"font-medium text-primary",children:(0,n.v)(Number(o))}),(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:["Mitra: ",m?.name]})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-1 text-right",children:[(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:["Berat: ",d,"g"]}),(0,s.jsxs)("p",{className:"text-gray-500",children:["Stok: ",l]}),(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:["Terjual: ",c]})]})]})}),(0,s.jsxs)("div",{className:"flex justify-end md:items-center space-x-2 mt-3 md:mt-0",children:[(0,s.jsx)("button",{onClick:()=>u?.(e??0),className:"cursor-pointer p-2 text-white rounded-xl bg-blue-500 hover:-translate-y-1 duration-150 ease-in",title:"Edit",children:(0,s.jsx)(a.A,{size:18})}),(0,s.jsx)("button",{onClick:()=>x?.(e??0),className:"cursor-pointer p-2 text-white rounded-xl bg-red-500 hover:-translate-y-1 duration-150 ease-in",title:"Hapus",children:(0,s.jsx)(i.A,{size:18})})]})]})]})}},94358:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(60687),a=r(43210),i=r(41862);r(62820);var n=r(48137),o=r(16189),l=r(34537),d=r(88941),c=r(94928);function m(){let[e,t]=(0,a.useState)({name:"",partnerName:"",description:"",price:"",weight:"",stock:""}),[r,m]=(0,a.useState)({}),[p,u]=(0,a.useState)([]),[x,h]=(0,a.useState)(!1),[g,b]=(0,a.useState)(null),[y,f]=(0,a.useState)(null),j=(0,a.useRef)(null),[v,k]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[C,P]=(0,a.useState)(""),[S,A]=(0,a.useState)(!1),[q,D]=(0,a.useState)(""),[M,T]=(0,a.useState)("success"),_=(0,o.useRouter)(),[R,E]=(0,a.useState)(!1),F=e=>{let{name:s,value:a}=e.target;t(e=>({...e,[s]:"price"===s||"stock"===s?Number(a):a})),r[s]&&m(e=>{let t={...e};return delete t[s],t})},U=async()=>{k(!0),P("");try{let t=new FormData;t.append("name",e.name),t.append("partner_id",e.partnerName),t.append("description",e.description),t.append("price",e.price.toString()),t.append("weight",e.weight.toString()),t.append("stock",e.stock.toString()),g&&t.append("productFile",g);let r=await (0,n.WY)(t);r&&r.message&&(sessionStorage.setItem("popup",JSON.stringify({message:r.message,type:"success"})),_.push("/admin/product"))}catch(e){"validation"===e.type?(m(e.errors),E(!1),console.error("Validation errors:",e.errors)):(console.error("Error:",e),D(e.message||"Terjadi kesalahan saat menyimpan berita."),T("error"),A(!0))}finally{k(!1)}};return(0,s.jsxs)("div",{className:"mx-auto bg-tertiary p-6 rounded-lg shadow-md",children:[S&&(0,s.jsx)(l.A,{message:q,type:M,onClose:()=>A(!1)}),(0,s.jsx)(c.A,{title:"Simpan Produk",description:"Apakah Anda yakin ingin membuat produk baru? Pastikan informasi yang Anda masukkan sudah benar.",isOpen:R,isSubmitting:v,onClose:()=>{E(!1)},onConfirm:U}),(0,s.jsx)("h1",{className:"text-lg font-medium mb-4",children:"Tambah Produk Baru"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,s.jsx)("form",{onSubmit:U,className:"w-full md:w-1/2 text-sm",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gambar Produk"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>j.current?.click(),className:"cursor-pointer font-medium bg-primary text-white px-4 py-2 rounded-xl hover:-translate-y-1 duration-150 ease-in text-sm",children:"Pilih Gambar"}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:g?g.name:"Belum ada gambar dipilih"}),(0,s.jsx)("input",{type:"file",ref:j,onChange:e=>{let t=e.target.files?.[0];if(t){b(t);let e=new FileReader;e.onloadend=()=>{f(e.result)},e.readAsDataURL(t)}},accept:"image/*",className:"hidden"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Format: JPG, PNG. Maksimal 5MB."}),r.productFile&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:r.productFile})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Produk"}),(0,s.jsx)("input",{type:"text",name:"name",value:e.name,onChange:F,className:"w-full p-2 border border-gray-300 rounded-xl"}),r.name&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:r.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Mitra"}),x?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"animate-spin w-4"}),(0,s.jsx)("span",{children:"Memuat daftar mitra..."})]}):(0,s.jsxs)("select",{name:"partnerName",value:e.partnerName,onChange:F,className:"w-full p-2 border border-gray-300 rounded-xl",children:[(0,s.jsx)("option",{value:"",children:"Pilih Mitra"}),p.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deskripsi Produk"}),(0,s.jsx)("textarea",{name:"description",value:e.description,onChange:F,className:"w-full p-2 border border-gray-300 rounded-xl",rows:3}),r.description&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:r.description})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Harga (Rp)"}),(0,s.jsx)("input",{type:"number",name:"price",value:e.price||"",onChange:F,className:"w-full p-2 border border-gray-300 rounded-xl"}),r.price&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:r.price})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Berat (gram)"}),(0,s.jsx)("input",{type:"number",name:"weight",value:e.weight||"",onChange:F,className:"w-full p-2 border border-gray-300 rounded-xl"}),r.weight&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:r.weight})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stok Tersedia"}),(0,s.jsx)("input",{type:"number",name:"stock",value:e.stock||"",onChange:F,className:"w-full p-2 border border-gray-300 rounded-xl"}),r.stock&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:r.stock})]}),(0,s.jsx)("button",{type:"button",onClick:()=>E(!0),className:"cursor-pointer w-full bg-primary text-white py-2 px-4 text-sm font-medium rounded-xl hover:-translate-y-1 duration-150 ease-in flex justify-center items-center gap-2 disabled:opacity-50",children:"Simpan Produk"})]})}),(0,s.jsxs)("div",{className:"w-full md:w-1/2 max-w-100",children:[(0,s.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Pratinjau Produk"}),(0,s.jsx)(d.A,{id:0,image:y||"/assets/noimage.png",name:e.name||"Nama Produk",price:e.price?Number(e.price):0,stock:Number(e.stock)||0,sold:(e.stock,0),weight:e.weight?Number(e.weight):0,partner:p.length>0?{name:p.find(t=>t.id.toString()===e.partnerName)?.name||"Pilih Mitra",id:Number(e.partnerName)||0}:{name:"Pilih Mitra"},onEdit:()=>{},onDelete:()=>{}})]})]})]})}},94735:e=>{"use strict";e.exports=require("events")},96362:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},98971:(e,t,r)=>{Promise.resolve().then(r.bind(r,94358))}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[6629,54,8711],()=>r(4839));module.exports=s})();