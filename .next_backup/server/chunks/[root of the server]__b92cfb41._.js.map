{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/IZUNA/Documents/github%204/FE-Web-SekolahKopiRaisa/app/api/laporan-layanan/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL;\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    // Get the authorization token from the request headers\r\n    const authHeader = request.headers.get(\"authorization\");\r\n\r\n    if (!authHeader) {\r\n      return NextResponse.json(\r\n        { success: false, message: \"No authorization token provided\" },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    console.log(\"[Proxy] Receiving request to create laporan layanan\");\r\n    console.log(\"[Proxy] Auth header exists:\", !!authHeader);\r\n\r\n    // Get the form data from the request\r\n    const formData = await request.formData();\r\n    \r\n    // Log form data entries (without file content)\r\n    console.log(\"[Proxy] Form data entries:\");\r\n    for (const [key, value] of formData.entries()) {\r\n      if (value instanceof File) {\r\n        console.log(`  ${key}: File(${value.name}, ${value.size} bytes, ${value.type})`);\r\n      } else {\r\n        console.log(`  ${key}: ${value}`);\r\n      }\r\n    }\r\n\r\n    const backendUrl = `${API_BASE_URL}/api/v1/laporan-layanan`;\r\n    console.log(\"[Proxy] Forwarding to:\", backendUrl);\r\n\r\n    // Forward the request to the backend\r\n    const response = await fetch(backendUrl, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Authorization: authHeader,\r\n        // Don't set Content-Type, let fetch handle it for FormData\r\n      },\r\n      body: formData,\r\n    });\r\n\r\n    console.log(\"[Proxy] Backend response status:\", response.status);\r\n\r\n    // Get the response data\r\n    const contentType = response.headers.get(\"content-type\");\r\n    let data;\r\n    \r\n    if (contentType && contentType.includes(\"application/json\")) {\r\n      data = await response.json();\r\n    } else {\r\n      const text = await response.text();\r\n      console.log(\"[Proxy] Non-JSON response:\", text);\r\n      data = { success: false, message: text || \"Unexpected response format\" };\r\n    }\r\n\r\n    console.log(\"[Proxy] Backend response data:\", data);\r\n\r\n    // Return the response with the same status code\r\n    return NextResponse.json(data, { status: response.status });\r\n  } catch (error: any) {\r\n    console.error(\"[Proxy] Error:\", error);\r\n    return NextResponse.json(\r\n      { \r\n        success: false, \r\n        message: error.message || \"Internal server error\",\r\n        error: error.toString()\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM;AAEC,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,uDAAuD;QACvD,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;QAEvC,IAAI,CAAC,YAAY;YACf,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,SAAS;YAAkC,GAC7D;gBAAE,QAAQ;YAAI;QAElB;QAEA,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,+BAA+B,CAAC,CAAC;QAE7C,qCAAqC;QACrC,MAAM,WAAW,MAAM,QAAQ,QAAQ;QAEvC,+CAA+C;QAC/C,QAAQ,GAAG,CAAC;QACZ,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,SAAS,OAAO,GAAI;YAC7C,IAAI,iBAAiB,MAAM;gBACzB,QAAQ,GAAG,CAAC,CAAC,EAAE,EAAE,IAAI,OAAO,EAAE,MAAM,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,QAAQ,EAAE,MAAM,IAAI,CAAC,CAAC,CAAC;YACjF,OAAO;gBACL,QAAQ,GAAG,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE,OAAO;YAClC;QACF;QAEA,MAAM,aAAa,GAAG,aAAa,uBAAuB,CAAC;QAC3D,QAAQ,GAAG,CAAC,0BAA0B;QAEtC,qCAAqC;QACrC,MAAM,WAAW,MAAM,MAAM,YAAY;YACvC,QAAQ;YACR,SAAS;gBACP,eAAe;YAEjB;YACA,MAAM;QACR;QAEA,QAAQ,GAAG,CAAC,oCAAoC,SAAS,MAAM;QAE/D,wBAAwB;QACxB,MAAM,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC;QACzC,IAAI;QAEJ,IAAI,eAAe,YAAY,QAAQ,CAAC,qBAAqB;YAC3D,OAAO,MAAM,SAAS,IAAI;QAC5B,OAAO;YACL,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,QAAQ,GAAG,CAAC,8BAA8B;YAC1C,OAAO;gBAAE,SAAS;gBAAO,SAAS,QAAQ;YAA6B;QACzE;QAEA,QAAQ,GAAG,CAAC,kCAAkC;QAE9C,gDAAgD;QAChD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,MAAM;YAAE,QAAQ,SAAS,MAAM;QAAC;IAC3D,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,kBAAkB;QAChC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,SAAS,MAAM,OAAO,IAAI;YAC1B,OAAO,MAAM,QAAQ;QACvB,GACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}