{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/IZUNA/Documents/github%204/FE-Web-SekolahKopiRaisa/app/utils/layanan.ts"],"sourcesContent":["import api from \"./api\";\r\n\r\n// Types untuk Layanan\r\nexport interface LayananItem {\r\n  status_pengajuan_kode: any;\r\n  id: number;\r\n  nama_kegiatan: string;\r\n  tempat_kegiatan: string;\r\n  jumlah_peserta: number;\r\n  instansi_asal: string;\r\n  tanggal_mulai: string;\r\n  tanggal_selesai: string;\r\n  durasi_dalam_bulan?: number;\r\n  link_logbook?: string;\r\n  file_proposal?: string;\r\n  file_surat_permohonan?: string;\r\n  file_surat_pengantar?: string;\r\n  file_surat_undangan?: string;\r\n  file_undangan_narasumber?: string;\r\n  fakultas?: string;\r\n  prodi?: string;\r\n  created_at: string;\r\n  pemohon: {\r\n    id: number;\r\n    name: string;\r\n    email: string;\r\n  };\r\n  peserta?: Array<{\r\n    id: number;\r\n    nama_peserta: string;\r\n    nama?: string;\r\n    instansi_asal: string;\r\n    fakultas?: string;\r\n    program_studi?: string;\r\n    nim?: string;\r\n  }>;\r\n  pengajuan: {\r\n    id: number;\r\n    nama_status_kode: string;\r\n    alasan_penolakan?: string; // Kemungkinan alasan langsung di dalam pengajuan\r\n  };\r\n  pengajuanRejection?: {\r\n    id: number;\r\n    id_layanan: number;\r\n    alasan: string;\r\n  };\r\n  layananRejection?:\r\n    | {\r\n        id: number;\r\n        id_layanan: number;\r\n        alasan: string;\r\n      }\r\n    | Array<{\r\n        id: number;\r\n        id_layanan: number;\r\n        alasan: string;\r\n      }>;\r\n  rejection?: {\r\n    id: number;\r\n    id_layanan: number;\r\n    alasan: string;\r\n  };\r\n  alasan_penolakan?: string; // Kemungkinan langsung di root level\r\n  pelaksanaan: {\r\n    id: number;\r\n    nama_status_kode: string;\r\n  };\r\n  // Backend response fields (for mapping)\r\n  statusKodePengajuan?: {\r\n    id: number;\r\n    nama_status_kode: string;\r\n  };\r\n  statusKodePelaksanaan?: {\r\n    id: number;\r\n    nama_status_kode: string;\r\n  };\r\n  mou?: {\r\n    id: number;\r\n    statusKode: {\r\n      id: number;\r\n      nama_status_kode: string;\r\n    };\r\n    file_mou?: string;\r\n    tanggal_upload?: string;\r\n    mouRejection?: {\r\n      id: number;\r\n      id_mou: number;\r\n      alasan: string;\r\n    };\r\n  };\r\n  sertifikat?:\r\n    | {\r\n        id?: number;\r\n        nama_status_kode?: string;\r\n        file_sertifikat?: string;\r\n        link_sertifikat?: string;\r\n        status?: {\r\n          id: number;\r\n          nama_status_kode: string;\r\n        };\r\n      }\r\n    | Array<{\r\n        id?: number;\r\n        nama_status_kode?: string;\r\n        file_sertifikat?: string;\r\n        link_sertifikat?: string;\r\n        status?: {\r\n          id: number;\r\n          nama_status_kode: string;\r\n        };\r\n      }>;\r\n  laporan?: {\r\n    length: number;\r\n    id?: number;\r\n    nama_status_kode?: string;\r\n    nama_p4s?: string;\r\n    asal_kab_kota?: string;\r\n    foto_kegiatan?: string;\r\n    statusPelaporan?: {\r\n      id: number;\r\n      nama_status_kode: string;\r\n    };\r\n    status?: {\r\n      id: number;\r\n      nama_status_kode: string;\r\n    };\r\n    layanan?: {\r\n      nama_kegiatan?: string;\r\n      jenisLayanan?: {\r\n        nama_jenis_layanan: string;\r\n      };\r\n    };\r\n  };\r\n  kegiatan?: Array<{\r\n    id: number;\r\n    nama_kegiatan: string;\r\n  }>;\r\n  jenis_layanan?: {\r\n    id: number;\r\n    nama_jenis_layanan: string;\r\n  };\r\n  jenisLayanan?: {\r\n    id: number;\r\n    nama_jenis_layanan: string;\r\n  };\r\n}\r\n\r\nexport interface LayananQueryParams {\r\n  include_jenis?: boolean;\r\n  include_peserta?: boolean;\r\n  include_mou?: boolean;\r\n  include_sertifikat?: boolean;\r\n  include_laporan?: boolean;\r\n  include_rejection?: boolean;\r\n  include_pengajuan?: boolean;\r\n  include_pelaksanaan?: boolean;\r\n}\r\n\r\n// GET ALL LAYANAN (untuk user dan admin)\r\nexport const fetchAllLayanan = async (\r\n  params?: LayananQueryParams\r\n): Promise<LayananItem[]> => {\r\n  try {\r\n    const queryParams = new URLSearchParams();\r\n    if (params?.include_jenis) queryParams.append(\"include_jenis\", \"true\");\r\n    if (params?.include_peserta) queryParams.append(\"include_peserta\", \"true\");\r\n    if (params?.include_mou) queryParams.append(\"include_mou\", \"true\");\r\n    if (params?.include_sertifikat)\r\n      queryParams.append(\"include_sertifikat\", \"true\");\r\n    if (params?.include_laporan) queryParams.append(\"include_laporan\", \"true\");\r\n    if (params?.include_rejection)\r\n      queryParams.append(\"include_rejection\", \"true\");\r\n    if (params?.include_pengajuan)\r\n      queryParams.append(\"include_pengajuan\", \"true\");\r\n    if (params?.include_pelaksanaan)\r\n      queryParams.append(\"include_pelaksanaan\", \"true\");\r\n\r\n    const url = `/api/v1/layanan${\r\n      queryParams.toString() ? `?${queryParams.toString()}` : \"\"\r\n    }`;\r\n    console.log(\"Fetching layanan from:\", url);\r\n\r\n    const response = await api.get(url);\r\n    console.log(\"Layanan response:\", response.data);\r\n\r\n    if (response.data.success) {\r\n      return response.data.data;\r\n    }\r\n    throw new Error(response.data.message || \"Gagal mengambil data layanan\");\r\n  } catch (error: any) {\r\n    console.error(\"Error fetching layanan:\", error);\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n        error.message ||\r\n        \"Gagal mengambil data layanan\"\r\n    );\r\n  }\r\n};\r\n\r\n// GET LAYANAN BY ID\r\nexport const fetchLayananById = async (\r\n  id: number,\r\n  params?: LayananQueryParams\r\n): Promise<LayananItem> => {\r\n  try {\r\n    const queryParams = new URLSearchParams();\r\n    if (params?.include_jenis) queryParams.append(\"include_jenis\", \"true\");\r\n    if (params?.include_peserta) queryParams.append(\"include_peserta\", \"true\");\r\n    if (params?.include_mou) queryParams.append(\"include_mou\", \"true\");\r\n    if (params?.include_sertifikat)\r\n      queryParams.append(\"include_sertifikat\", \"true\");\r\n    if (params?.include_laporan) queryParams.append(\"include_laporan\", \"true\");\r\n    if (params?.include_rejection)\r\n      queryParams.append(\"include_rejection\", \"true\");\r\n    if (params?.include_pengajuan)\r\n      queryParams.append(\"include_pengajuan\", \"true\");\r\n    if (params?.include_pelaksanaan)\r\n      queryParams.append(\"include_pelaksanaan\", \"true\");\r\n\r\n    const url = `/api/v1/layanan/${id}${\r\n      queryParams.toString() ? `?${queryParams.toString()}` : \"\"\r\n    }`;\r\n    console.log(\"Fetching layanan detail from:\", url);\r\n\r\n    const response = await api.get(url);\r\n    console.log(\"Layanan detail response:\", response.data);\r\n\r\n    if (response.data.success) {\r\n      return response.data.data;\r\n    }\r\n    throw new Error(response.data.message || \"Gagal mengambil detail layanan\");\r\n  } catch (error: any) {\r\n    console.error(\"Error fetching layanan detail:\", error);\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n        error.message ||\r\n        \"Gagal mengambil detail layanan\"\r\n    );\r\n  }\r\n};\r\n\r\n// POST CREATE LAYANAN\r\nexport const createLayanan = async (\r\n  formData: FormData\r\n): Promise<LayananItem> => {\r\n  try {\r\n    // Debug isi FormData\r\n    const debugEntries: Record<string, any> = {};\r\n    formData.forEach((v, k) => {\r\n      debugEntries[k] =\r\n        v instanceof File ? `File(name=${v.name}, size=${v.size})` : v;\r\n    });\r\n    console.log(\"Creating layanan with data:\", debugEntries);\r\n\r\n    // Biarkan axios/browser set Content-Type + boundary otomatis\r\n    const response = await api.post(\"/api/v1/layanan\", formData);\r\n    console.log(\"Create layanan response:\", response.data);\r\n\r\n    if (response.data.success) {\r\n      return response.data.data;\r\n    }\r\n    throw new Error(response.data.message || \"Gagal membuat layanan\");\r\n  } catch (error: any) {\r\n    console.error(\"Error creating layanan:\", error);\r\n    console.error(\"Response status:\", error?.response?.status);\r\n    console.error(\"Response data:\", error?.response?.data);\r\n    console.error(\"Response headers:\", error?.response?.headers);\r\n    const serverMsg =\r\n      error?.response?.data?.message ||\r\n      error?.response?.data?.error ||\r\n      JSON.stringify(error?.response?.data);\r\n    throw new Error(serverMsg || error.message || \"Gagal membuat layanan\");\r\n  }\r\n};\r\n\r\n// PUT UPDATE STATUS LAYANAN\r\nexport const acceptPengajuan = async (id: number): Promise<LayananItem> => {\r\n  try {\r\n    console.log(\"Accepting pengajuan:\", id);\r\n\r\n    // Backend route: PUT /api/v1/layanan/:id/accept-pengajuan\r\n    const response = await api.put(`/api/v1/layanan/${id}/accept-pengajuan`);\r\n    console.log(\"Accept pengajuan response:\", response.data);\r\n\r\n    if (response.data.success) {\r\n      return response.data.data;\r\n    }\r\n    throw new Error(response.data.message || \"Gagal menyetujui pengajuan\");\r\n  } catch (error: any) {\r\n    console.error(\"Error accepting pengajuan:\", error);\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n        error.message ||\r\n        \"Gagal menyetujui pengajuan\"\r\n    );\r\n  }\r\n};\r\n\r\nexport const rejectPengajuan = async (\r\n  id: number,\r\n  alasan: string\r\n): Promise<LayananItem> => {\r\n  try {\r\n    console.log(\"Rejecting pengajuan:\", id, alasan);\r\n\r\n    // Backend route: PUT /api/v1/layanan/:id/reject-pengajuan with body { alasan: \"...\" }\r\n    const response = await api.put(`/api/v1/layanan/${id}/reject-pengajuan`, {\r\n      alasan,\r\n    });\r\n    console.log(\"Reject pengajuan response:\", response.data);\r\n    console.log(\"Reject pengajuan response.data.data:\", response.data.data);\r\n    console.log(\r\n      \"Reject pengajuan response.data.data.layananRejection:\",\r\n      response.data.data?.layananRejection\r\n    );\r\n\r\n    if (response.data.success) {\r\n      return response.data.data;\r\n    }\r\n    throw new Error(response.data.message || \"Gagal menolak pengajuan\");\r\n  } catch (error: any) {\r\n    console.error(\"Error rejecting pengajuan:\", error);\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n        error.message ||\r\n        \"Gagal mengupdate status layanan\"\r\n    );\r\n  }\r\n};\r\n\r\n// POST/PUT LOGBOOK\r\nexport interface LogbookPayload {\r\n  id_layanan: number;\r\n  link_logbook: string;\r\n}\r\n\r\nexport const submitLogbook = async (\r\n  id: number,\r\n  payload: LogbookPayload\r\n): Promise<{ success: boolean; message: string; data?: any }> => {\r\n  try {\r\n    console.log(\"Submitting logbook for layanan:\", id, payload);\r\n    console.log(\"API URL:\", `/api/v1/layanan/${id}/logbook`);\r\n\r\n    // Backend uses PUT for both create and update logbook\r\n    const response = await api.put(`/api/v1/layanan/${id}/logbook`, payload);\r\n    console.log(\"Submit logbook response:\", response.data);\r\n\r\n    // Handle different response formats\r\n    if (\r\n      response.data &&\r\n      (response.data.success ||\r\n        response.status === 200 ||\r\n        response.status === 201)\r\n    ) {\r\n      return {\r\n        success: true,\r\n        message: response.data.message || \"Logbook berhasil dikirim\",\r\n        data: response.data.data || response.data,\r\n      };\r\n    }\r\n    throw new Error(response.data?.message || \"Gagal mengirim logbook\");\r\n  } catch (error: any) {\r\n    console.error(\"Error submitting logbook:\", error);\r\n    console.error(\"Error response:\", error.response);\r\n    console.error(\"Error status:\", error.response?.status);\r\n    console.error(\"Error data:\", error.response?.data);\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n        error.response?.data?.error ||\r\n        error.message ||\r\n        \"Gagal mengirim logbook\"\r\n    );\r\n  }\r\n};\r\n\r\nexport const updateLogbook = async (\r\n  id: number,\r\n  payload: LogbookPayload\r\n): Promise<{ success: boolean; message: string; data?: any }> => {\r\n  try {\r\n    console.log(\"Updating logbook for layanan:\", id, payload);\r\n    console.log(\"API URL:\", `/api/v1/layanan/${id}/logbook`);\r\n\r\n    const response = await api.put(`/api/v1/layanan/${id}/logbook`, payload);\r\n    console.log(\"Update logbook response:\", response.data);\r\n\r\n    // Handle different response formats\r\n    if (response.data && (response.data.success || response.status === 200)) {\r\n      return {\r\n        success: true,\r\n        message: response.data.message || \"Logbook berhasil diupdate\",\r\n        data: response.data.data || response.data,\r\n      };\r\n    }\r\n    throw new Error(response.data?.message || \"Gagal mengupdate logbook\");\r\n  } catch (error: any) {\r\n    console.error(\"Error updating logbook:\", error);\r\n    console.error(\"Error response:\", error.response);\r\n    console.error(\"Error status:\", error.response?.status);\r\n    console.error(\"Error data:\", error.response?.data);\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n        error.response?.data?.error ||\r\n        error.message ||\r\n        \"Gagal mengupdate logbook\"\r\n    );\r\n  }\r\n};\r\n\r\n// UPDATE STATUS PELAKSANAAN\r\nexport const updateStatusPelaksanaan = async (\r\n  id: number,\r\n  status: \"SELESAI\" | \"BERLANGSUNG\"\r\n): Promise<{ success: boolean; message: string; data?: any }> => {\r\n  try {\r\n    console.log(\"Finishing pelaksanaan for layanan:\", id);\r\n    console.log(\"API URL:\", `/api/v1/layanan/${id}/finish-pelaksanaan`);\r\n\r\n    const response = await api.put(`/api/v1/layanan/${id}/finish-pelaksanaan`);\r\n    console.log(\"Finish pelaksanaan response:\", response.data);\r\n\r\n    if (\r\n      response.data &&\r\n      (response.data.success ||\r\n        response.status === 200 ||\r\n        response.status === 201)\r\n    ) {\r\n      return {\r\n        success: true,\r\n        message:\r\n          response.data.message || \"Status pelaksanaan berhasil diupdate\",\r\n        data: response.data.data || response.data,\r\n      };\r\n    }\r\n    throw new Error(\r\n      response.data?.message || \"Gagal mengupdate status pelaksanaan\"\r\n    );\r\n  } catch (error: any) {\r\n    console.error(\"Error finishing pelaksanaan:\", error);\r\n    console.error(\"Error response:\", error.response);\r\n    console.error(\"Error status:\", error.response?.status);\r\n    console.error(\"Error data:\", error.response?.data);\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n        error.response?.data?.error ||\r\n        error.message ||\r\n        \"Gagal mengupdate status pelaksanaan\"\r\n    );\r\n  }\r\n};\r\n\r\n// Helper function untuk format status badge\r\nexport const getStatusColor = (status: string): string => {\r\n  const statusLower = status.toLowerCase();\r\n  if (statusLower.includes(\"disetujui\") || statusLower.includes(\"selesai\")) {\r\n    return \"bg-green-100 text-green-700 border-green-200\";\r\n  }\r\n  if (statusLower.includes(\"ditolak\") || statusLower.includes(\"batal\")) {\r\n    return \"bg-red-100 text-red-700 border-red-200\";\r\n  }\r\n  if (statusLower.includes(\"menunggu\") || statusLower.includes(\"pending\")) {\r\n    return \"bg-yellow-100 text-yellow-700 border-yellow-200\";\r\n  }\r\n  if (statusLower.includes(\"berlangsung\") || statusLower.includes(\"proses\")) {\r\n    return \"bg-blue-100 text-blue-700 border-blue-200\";\r\n  }\r\n  return \"bg-gray-100 text-gray-700 border-gray-200\";\r\n};\r\n\r\n// Helper function untuk format tanggal\r\nexport const formatDate = (dateString: string): string => {\r\n  return new Date(dateString).toLocaleDateString(\"id-ID\", {\r\n    year: \"numeric\",\r\n    month: \"long\",\r\n    day: \"numeric\",\r\n  });\r\n};\r\n\r\n// Helper function untuk format nama jenis layanan ke slug\r\nexport const getSlugFromJenisLayanan = (namaJenis: string): string => {\r\n  const namaLower = namaJenis.toLowerCase();\r\n  if (namaLower.includes(\"pkl\")) return \"pkl\";\r\n  if (namaLower.includes(\"magang\")) return \"magang\";\r\n  if (namaLower.includes(\"pelatihan\")) return \"pelatihan\";\r\n  if (namaLower.includes(\"kunjungan\")) return \"kunjungan\";\r\n  if (namaLower.includes(\"narasumber\")) return \"undangan-narasumber\";\r\n  return namaJenis.toLowerCase().replace(/\\s+/g, \"-\");\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/IZUNA/Documents/github%204/FE-Web-SekolahKopiRaisa/app/utils/mou.ts"],"sourcesContent":["import api from \"./api\";\r\n\r\nexport interface MouItem {\r\n  id: number;\r\n  id_layanan: number;\r\n  id_status_pengajuan: number;\r\n  file_mou: string;\r\n  tanggal_upload?: string;\r\n  tanggal_disetujui?: string;\r\n  statusKode?: {\r\n    id: number;\r\n    nama_status_kode: string;\r\n  };\r\n  mouRejection?: {\r\n    id: number;\r\n    id_mou: number;\r\n    alasan: string;\r\n  };\r\n}\r\n\r\n// GET MOU BY ID\r\nexport const fetchMouById = async (id: number): Promise<MouItem> => {\r\n  try {\r\n    const response = await api.get(`/api/v1/mou/${id}`);\r\n    if (response.data.success) {\r\n      return response.data.data;\r\n    }\r\n    throw new Error(response.data.message || \"Gagal mengambil data MOU\");\r\n  } catch (error: any) {\r\n    console.error(\"Error fetching MOU:\", error);\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n        error.message ||\r\n        \"Gagal mengambil data MOU\"\r\n    );\r\n  }\r\n};\r\n\r\n// CREATE MOU (User upload MOU)\r\nexport const createMou = async (data: {\r\n  id_layanan: number;\r\n  file_mou: File;\r\n}): Promise<MouItem> => {\r\n  try {\r\n    const formData = new FormData();\r\n    formData.append(\"id_layanan\", data.id_layanan.toString());\r\n    formData.append(\"file_mou\", data.file_mou);\r\n\r\n    const response = await api.post(\"/api/v1/mou\", formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n\r\n    if (response.data.success) {\r\n      return response.data.data;\r\n    }\r\n    throw new Error(response.data.message || \"Gagal mengunggah MOU\");\r\n  } catch (error: any) {\r\n    console.error(\"Error creating MOU:\", error);\r\n    throw new Error(\r\n      error.response?.data?.message || error.message || \"Gagal mengunggah MOU\"\r\n    );\r\n  }\r\n};\r\n\r\n// UPDATE MOU (User re-upload MOU setelah ditolak)\r\nexport const updateMou = async (\r\n  id: number,\r\n  file_mou: File\r\n): Promise<MouItem> => {\r\n  try {\r\n    const formData = new FormData();\r\n    formData.append(\"file_mou\", file_mou);\r\n\r\n    const response = await api.put(`/api/v1/mou/${id}`, formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n\r\n    if (response.data.success) {\r\n      return response.data.data;\r\n    }\r\n    throw new Error(response.data.message || \"Gagal memperbarui MOU\");\r\n  } catch (error: any) {\r\n    console.error(\"Error updating MOU:\", error);\r\n    throw new Error(\r\n      error.response?.data?.message || error.message || \"Gagal memperbarui MOU\"\r\n    );\r\n  }\r\n};\r\n\r\n// APPROVE MOU (Admin approves MOU)\r\nexport const approveMou = async (id: number): Promise<MouItem> => {\r\n  try {\r\n    const response = await api.put(`/api/v1/mou/${id}/accept`);\r\n\r\n    if (response.data.success) {\r\n      return response.data.data;\r\n    }\r\n    throw new Error(response.data.message || \"Gagal menyetujui MOU\");\r\n  } catch (error: any) {\r\n    console.error(\"Error approving MOU:\", error);\r\n    throw new Error(\r\n      error.response?.data?.message || error.message || \"Gagal menyetujui MOU\"\r\n    );\r\n  }\r\n};\r\n\r\n// REJECT MOU (Admin rejects MOU)\r\nexport const rejectMou = async (\r\n  id: number,\r\n  alasan: string\r\n): Promise<MouItem> => {\r\n  try {\r\n    const response = await api.put(`/api/v1/mou/${id}/reject`, { alasan });\r\n\r\n    if (response.data.success) {\r\n      return response.data.data;\r\n    }\r\n    throw new Error(response.data.message || \"Gagal menolak MOU\");\r\n  } catch (error: any) {\r\n    console.error(\"Error rejecting MOU:\", error);\r\n    throw new Error(\r\n      error.response?.data?.message || error.message || \"Gagal menolak MOU\"\r\n    );\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;;;;;AAAA;;AAqBO,MAAM,eAAe,OAAO;IACjC,IAAI;QACF,MAAM,WAAW,MAAM,mHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,IAAI;QAClD,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;YACzB,OAAO,SAAS,IAAI,CAAC,IAAI;QAC3B;QACA,MAAM,IAAI,MAAM,SAAS,IAAI,CAAC,OAAO,IAAI;IAC3C,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,MAAM,IAAI,MACR,MAAM,QAAQ,EAAE,MAAM,WACpB,MAAM,OAAO,IACb;IAEN;AACF;AAGO,MAAM,YAAY,OAAO;IAI9B,IAAI;QACF,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,cAAc,KAAK,UAAU,CAAC,QAAQ;QACtD,SAAS,MAAM,CAAC,YAAY,KAAK,QAAQ;QAEzC,MAAM,WAAW,MAAM,mHAAA,CAAA,UAAG,CAAC,IAAI,CAAC,eAAe,UAAU;YACvD,SAAS;gBACP,gBAAgB;YAClB;QACF;QAEA,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;YACzB,OAAO,SAAS,IAAI,CAAC,IAAI;QAC3B;QACA,MAAM,IAAI,MAAM,SAAS,IAAI,CAAC,OAAO,IAAI;IAC3C,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,MAAM,IAAI,MACR,MAAM,QAAQ,EAAE,MAAM,WAAW,MAAM,OAAO,IAAI;IAEtD;AACF;AAGO,MAAM,YAAY,OACvB,IACA;IAEA,IAAI;QACF,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,YAAY;QAE5B,MAAM,WAAW,MAAM,mHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,IAAI,EAAE,UAAU;YAC5D,SAAS;gBACP,gBAAgB;YAClB;QACF;QAEA,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;YACzB,OAAO,SAAS,IAAI,CAAC,IAAI;QAC3B;QACA,MAAM,IAAI,MAAM,SAAS,IAAI,CAAC,OAAO,IAAI;IAC3C,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,MAAM,IAAI,MACR,MAAM,QAAQ,EAAE,MAAM,WAAW,MAAM,OAAO,IAAI;IAEtD;AACF;AAGO,MAAM,aAAa,OAAO;IAC/B,IAAI;QACF,MAAM,WAAW,MAAM,mHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,GAAG,OAAO,CAAC;QAEzD,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;YACzB,OAAO,SAAS,IAAI,CAAC,IAAI;QAC3B;QACA,MAAM,IAAI,MAAM,SAAS,IAAI,CAAC,OAAO,IAAI;IAC3C,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,wBAAwB;QACtC,MAAM,IAAI,MACR,MAAM,QAAQ,EAAE,MAAM,WAAW,MAAM,OAAO,IAAI;IAEtD;AACF;AAGO,MAAM,YAAY,OACvB,IACA;IAEA,IAAI;QACF,MAAM,WAAW,MAAM,mHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,GAAG,OAAO,CAAC,EAAE;YAAE;QAAO;QAEpE,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;YACzB,OAAO,SAAS,IAAI,CAAC,IAAI;QAC3B;QACA,MAAM,IAAI,MAAM,SAAS,IAAI,CAAC,OAAO,IAAI;IAC3C,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,wBAAwB;QACtC,MAAM,IAAI,MACR,MAAM,QAAQ,EAAE,MAAM,WAAW,MAAM,OAAO,IAAI;IAEtD;AACF","debugId":null}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/IZUNA/Documents/github%204/FE-Web-SekolahKopiRaisa/app/utils/sertifikat.ts"],"sourcesContent":["import api from \"./api\";\r\n\r\n// Types untuk Sertifikat\r\nexport interface SertifikatItem {\r\n  id: number;\r\n  id_layanan?: number;\r\n  link_sertifikat: string | null;\r\n  file_sertifikat: string;\r\n  created_at: string;\r\n  updated_at?: string;\r\n  layanan?: {\r\n    id: number;\r\n    instansi_asal: string;\r\n    jumlah_peserta: number;\r\n    tanggal_mulai: string;\r\n    tanggal_selesai: string;\r\n  };\r\n}\r\n\r\nexport interface SertifikatResponse {\r\n  success: boolean;\r\n  message: string;\r\n  data?: SertifikatItem;\r\n}\r\n\r\nexport interface CreateSertifikatPayload {\r\n  id_layanan: number;\r\n  link_sertifikat?: string;\r\n  file_sertifikat: File;\r\n}\r\n\r\n// GET SERTIFIKAT BY LAYANAN ID\r\nexport const fetchSertifikatById = async (\r\n  idLayanan: number\r\n): Promise<SertifikatItem> => {\r\n  try {\r\n    console.log(\r\n      \"Fetching sertifikat detail from:\",\r\n      `/api/v1/sertifikat/${idLayanan}`\r\n    );\r\n\r\n    const response = await api.get(`/api/v1/sertifikat/${idLayanan}`);\r\n    console.log(\"Sertifikat detail response:\", response.data);\r\n\r\n    if (response.data.success) {\r\n      return response.data.data;\r\n    }\r\n    throw new Error(\r\n      response.data.message || \"Gagal mengambil detail sertifikat\"\r\n    );\r\n  } catch (error: any) {\r\n    console.error(\"Error fetching sertifikat detail:\", error);\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n        error.message ||\r\n        \"Gagal mengambil detail sertifikat\"\r\n    );\r\n  }\r\n};\r\n\r\n// CREATE/UPLOAD SERTIFIKAT (Admin only)\r\nexport const createSertifikat = async (\r\n  payload: CreateSertifikatPayload\r\n): Promise<SertifikatItem> => {\r\n  try {\r\n    console.log(\"Creating sertifikat for layanan:\", payload.id_layanan);\r\n    console.log(\r\n      \"File to upload:\",\r\n      payload.file_sertifikat?.name,\r\n      payload.file_sertifikat?.type\r\n    );\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"id_layanan\", payload.id_layanan.toString());\r\n    if (payload.link_sertifikat) {\r\n      formData.append(\"link_sertifikat\", payload.link_sertifikat);\r\n    }\r\n    formData.append(\"file_sertifikat\", payload.file_sertifikat);\r\n\r\n    console.log(\"FormData contents:\");\r\n    for (let pair of formData.entries()) {\r\n      console.log(pair[0], pair[1]);\r\n    }\r\n\r\n    const response = await api.post(\"/api/v1/sertifikat\", formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n\r\n    console.log(\"Create sertifikat response:\", response.data);\r\n\r\n    if (response.data.success) {\r\n      return response.data.data;\r\n    }\r\n    throw new Error(response.data.message || \"Gagal mengupload sertifikat\");\r\n  } catch (error: any) {\r\n    console.error(\"Error creating sertifikat:\", error);\r\n    console.error(\"Error response:\", error.response?.data);\r\n    console.error(\"Error status:\", error.response?.status);\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n        error.message ||\r\n        \"Gagal mengupload sertifikat\"\r\n    );\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAgCO,MAAM,sBAAsB,OACjC;IAEA,IAAI;QACF,QAAQ,GAAG,CACT,oCACA,CAAC,mBAAmB,EAAE,WAAW;QAGnC,MAAM,WAAW,MAAM,mHAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,mBAAmB,EAAE,WAAW;QAChE,QAAQ,GAAG,CAAC,+BAA+B,SAAS,IAAI;QAExD,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;YACzB,OAAO,SAAS,IAAI,CAAC,IAAI;QAC3B;QACA,MAAM,IAAI,MACR,SAAS,IAAI,CAAC,OAAO,IAAI;IAE7B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,qCAAqC;QACnD,MAAM,IAAI,MACR,MAAM,QAAQ,EAAE,MAAM,WACpB,MAAM,OAAO,IACb;IAEN;AACF;AAGO,MAAM,mBAAmB,OAC9B;IAEA,IAAI;QACF,QAAQ,GAAG,CAAC,oCAAoC,QAAQ,UAAU;QAClE,QAAQ,GAAG,CACT,mBACA,QAAQ,eAAe,EAAE,MACzB,QAAQ,eAAe,EAAE;QAG3B,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,cAAc,QAAQ,UAAU,CAAC,QAAQ;QACzD,IAAI,QAAQ,eAAe,EAAE;YAC3B,SAAS,MAAM,CAAC,mBAAmB,QAAQ,eAAe;QAC5D;QACA,SAAS,MAAM,CAAC,mBAAmB,QAAQ,eAAe;QAE1D,QAAQ,GAAG,CAAC;QACZ,KAAK,IAAI,QAAQ,SAAS,OAAO,GAAI;YACnC,QAAQ,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE;QAC9B;QAEA,MAAM,WAAW,MAAM,mHAAA,CAAA,UAAG,CAAC,IAAI,CAAC,sBAAsB,UAAU;YAC9D,SAAS;gBACP,gBAAgB;YAClB;QACF;QAEA,QAAQ,GAAG,CAAC,+BAA+B,SAAS,IAAI;QAExD,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;YACzB,OAAO,SAAS,IAAI,CAAC,IAAI;QAC3B;QACA,MAAM,IAAI,MAAM,SAAS,IAAI,CAAC,OAAO,IAAI;IAC3C,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,QAAQ,KAAK,CAAC,mBAAmB,MAAM,QAAQ,EAAE;QACjD,QAAQ,KAAK,CAAC,iBAAiB,MAAM,QAAQ,EAAE;QAC/C,MAAM,IAAI,MACR,MAAM,QAAQ,EAAE,MAAM,WACpB,MAAM,OAAO,IACb;IAEN;AACF","debugId":null}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/IZUNA/Documents/github%204/FE-Web-SekolahKopiRaisa/app/admin/layanan/monitoring/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport {\r\n  Check,\r\n  FileText,\r\n  ShieldCheck,\r\n  ClipboardList,\r\n  Award,\r\n  ChevronLeft,\r\n  Eye,\r\n  Download,\r\n  Upload,\r\n} from \"lucide-react\";\r\nimport {\r\n  fetchLayananById,\r\n  LayananItem,\r\n  acceptPengajuan,\r\n  rejectPengajuan,\r\n  formatDate,\r\n} from \"@/app/utils/layanan\";\r\nimport { approveMou, rejectMou } from \"@/app/utils/mou\";\r\nimport { createSertifikat, SertifikatItem } from \"@/app/utils/sertifikat\";\r\n\r\ntype StepKey = \"pengajuan\" | \"mou\" | \"pelaksanaan\" | \"laporan\" | \"sertifikat\";\r\ntype StepStatus = \"inactive\" | \"active\" | \"done\";\r\n\r\nexport default function AdminMonitoringDetailPage() {\r\n  const params = useParams<{ id: string }>();\r\n  const router = useRouter();\r\n  const [layananData, setLayananData] = useState<LayananItem | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Sertifikat upload states\r\n  const [sertifikatFile, setSertifikatFile] = useState<File | null>(null);\r\n  const [sertifikatLink, setSertifikatLink] = useState<string>(\"\");\r\n  const [uploadingSertifikat, setUploadingSertifikat] =\r\n    useState<boolean>(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const [steps, setSteps] = useState<Record<StepKey, StepStatus>>({\r\n    pengajuan: \"active\",\r\n    mou: \"inactive\",\r\n    pelaksanaan: \"inactive\",\r\n    laporan: \"inactive\",\r\n    sertifikat: \"inactive\",\r\n  });\r\n\r\n  // Stable state untuk display status (tidak akan berubah setelah disetujui/ditolak)\r\n  const [displayPengajuanStatus, setDisplayPengajuanStatus] =\r\n    useState<string>(\"\");\r\n  const [displayPelaksanaanStatus, setDisplayPelaksanaanStatus] =\r\n    useState<string>(\"\");\r\n  const [isStatusInitialized, setIsStatusInitialized] =\r\n    useState<boolean>(false);\r\n\r\n  // Fetch layanan data\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      if (!params?.id) return;\r\n      try {\r\n        setLoading(true);\r\n        const data = await fetchLayananById(Number(params.id), {\r\n          include_jenis: true,\r\n          include_peserta: true,\r\n          include_mou: true,\r\n          include_sertifikat: true,\r\n          include_laporan: true,\r\n          include_rejection: true,\r\n        });\r\n        setLayananData(data);\r\n\r\n        // Set initial display status ONLY if not already set (first load)\r\n        if (!isStatusInitialized) {\r\n          let pengajuanStatus = data?.pengajuan?.nama_status_kode || \"\";\r\n          const pelaksanaanStatus = data?.pelaksanaan?.nama_status_kode || \"\";\r\n\r\n          // NORMALISASI STATUS PENGAJUAN: Jika \"Berlangsung\" tapi ada progress (MOU/Pelaksanaan),\r\n          // maka PASTI pengajuan sudah pernah disetujui - override jadi \"Disetujui\"\r\n          if (pengajuanStatus.toLowerCase().includes(\"berlangsung\")) {\r\n            if (data?.mou?.id || data?.pelaksanaan?.id || pelaksanaanStatus) {\r\n              pengajuanStatus = \"Disetujui\";\r\n            }\r\n          }\r\n\r\n          setDisplayPengajuanStatus(pengajuanStatus);\r\n          setDisplayPelaksanaanStatus(pelaksanaanStatus);\r\n          setIsStatusInitialized(true);\r\n        }\r\n\r\n        setError(null);\r\n      } catch (err: any) {\r\n        console.error(\"Error fetching layanan:\", err);\r\n        setError(err.message || \"Gagal memuat data layanan\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    loadData();\r\n  }, [params?.id]);\r\n\r\n  // Update all steps status based on actual data\r\n  useEffect(() => {\r\n    if (!layananData) return;\r\n\r\n    // GUNAKAN STABLE STATUS dari state, bukan langsung dari backend\r\n    const statusPengajuan =\r\n      displayPengajuanStatus.toLowerCase() ||\r\n      layananData?.pengajuan?.nama_status_kode?.toLowerCase() ||\r\n      \"\";\r\n    const statusPelaksanaan =\r\n      displayPelaksanaanStatus.toLowerCase() ||\r\n      layananData?.pelaksanaan?.nama_status_kode?.toLowerCase() ||\r\n      \"\";\r\n    const statusMou =\r\n      layananData?.mou?.statusKode?.nama_status_kode?.toLowerCase() || \"\";\r\n\r\n    const laporanData = Array.isArray(layananData?.laporan)\r\n      ? layananData.laporan[0]\r\n      : layananData?.laporan;\r\n    const hasLaporan = !!(laporanData?.id_laporan || laporanData?.id);\r\n\r\n    const sertifikatData = Array.isArray(layananData?.sertifikat)\r\n      ? layananData.sertifikat[0]\r\n      : layananData?.sertifikat;\r\n    const hasSertifikat = !!(\r\n      sertifikatData?.id || sertifikatData?.file_sertifikat\r\n    );\r\n\r\n    const jenisNama =\r\n      layananData.jenisLayanan?.nama_jenis_layanan ||\r\n      layananData.jenis_layanan?.nama_jenis_layanan ||\r\n      \"\";\r\n    const hasMouWorkflow = [\r\n      \"Magang\",\r\n      \"Praktek Kerja Lapangan (PKL)\",\r\n      \"Pelatihan\",\r\n    ].some((j) => jenisNama.includes(j));\r\n    const isSimpleWorkflow = [\"Kunjungan\", \"Undangan Narasumber\"].some((j) =>\r\n      jenisNama.includes(j)\r\n    );\r\n\r\n    let newSteps: Record<StepKey, StepStatus> = {\r\n      pengajuan: \"inactive\",\r\n      mou: \"inactive\",\r\n      pelaksanaan: \"inactive\",\r\n      laporan: \"inactive\",\r\n      sertifikat: \"inactive\",\r\n    };\r\n\r\n    // 1. PENGAJUAN - Gunakan stable status\r\n    if (\r\n      statusPengajuan.includes(\"selesai\") || // PENTING: Cek \"selesai\" dulu!\r\n      statusPengajuan.includes(\"disetujui\") ||\r\n      statusPengajuan.includes(\"ditolak\")\r\n    ) {\r\n      newSteps.pengajuan = \"done\";\r\n    } else if (statusPengajuan.includes(\"menunggu\")) {\r\n      newSteps.pengajuan = \"active\";\r\n    } else {\r\n      newSteps.pengajuan = \"active\";\r\n    }\r\n\r\n    // 2. MOU - Hanya untuk workflow yang pakai MOU (PKL, Magang, Pelatihan)\r\n    if (hasMouWorkflow) {\r\n      if (statusMou.includes(\"disetujui\") || statusMou.includes(\"ditolak\")) {\r\n        newSteps.mou = \"done\";\r\n      } else if (statusMou.includes(\"menunggu\") || layananData.mou?.id) {\r\n        newSteps.mou = \"active\";\r\n      } else if (statusPengajuan.includes(\"disetujui\")) {\r\n        // Pengajuan sudah disetujui tapi belum ada MOU, berarti MOU aktif\r\n        newSteps.mou = \"active\";\r\n      }\r\n    }\r\n\r\n    // 3. PELAKSANAAN - Hanya untuk workflow yang pakai MOU\r\n    if (hasMouWorkflow) {\r\n      if (statusPelaksanaan.includes(\"selesai\")) {\r\n        newSteps.pelaksanaan = \"done\";\r\n      } else if (\r\n        statusPelaksanaan.includes(\"berjalan\") ||\r\n        statusPelaksanaan.includes(\"belum\")\r\n      ) {\r\n        // Jika MOU sudah disetujui, pelaksanaan jadi aktif\r\n        if (statusMou.includes(\"disetujui\")) {\r\n          newSteps.pelaksanaan = \"active\";\r\n        }\r\n      }\r\n    }\r\n\r\n    // 4. LAPORAN AKHIR - Untuk semua workflow\r\n    if (hasLaporan) {\r\n      newSteps.laporan = \"done\";\r\n    } else {\r\n      // Laporan jadi aktif kalau:\r\n      // - Simple workflow: pengajuan disetujui\r\n      // - MOU workflow: pelaksanaan selesai atau berjalan\r\n      if (isSimpleWorkflow && statusPengajuan.includes(\"disetujui\")) {\r\n        newSteps.laporan = \"active\";\r\n      } else if (\r\n        hasMouWorkflow &&\r\n        (statusPelaksanaan.includes(\"selesai\") ||\r\n          statusPelaksanaan.includes(\"berjalan\"))\r\n      ) {\r\n        newSteps.laporan = \"active\";\r\n      }\r\n    }\r\n\r\n    // 5. SERTIFIKAT - HANYA untuk MOU workflow (PKL, Magang, Pelatihan)\r\n    // Undangan Narasumber & Kunjungan TIDAK ada sertifikat\r\n    if (hasMouWorkflow) {\r\n      if (hasSertifikat) {\r\n        newSteps.sertifikat = \"done\";\r\n      } else if (hasLaporan) {\r\n        // Kalau laporan sudah ada, sertifikat jadi aktif\r\n        newSteps.sertifikat = \"active\";\r\n      }\r\n    }\r\n\r\n    setSteps(newSteps);\r\n  }, [layananData, displayPengajuanStatus, displayPelaksanaanStatus]);\r\n\r\n  // Auto-update display status ketika ada perubahan data yang signifikan\r\n  useEffect(() => {\r\n    if (!layananData || !isStatusInitialized) return;\r\n\r\n    const laporanData = Array.isArray(layananData?.laporan)\r\n      ? layananData.laporan[0]\r\n      : layananData?.laporan;\r\n    const hasLaporan = !!(laporanData?.id_laporan || laporanData?.id);\r\n\r\n    // Jika laporan sudah ada, PAKSA status pelaksanaan jadi \"Selesai\"\r\n    if (hasLaporan && displayPelaksanaanStatus !== \"Selesai\") {\r\n      console.log(\r\n        \"[ADMIN DEBUG] Forcing pelaksanaan to Selesai because laporan exists\"\r\n      );\r\n      setDisplayPelaksanaanStatus(\"Selesai\");\r\n    }\r\n\r\n    // PENTING: Jika status pengajuan tiba-tiba berubah dari backend jadi \"Berlangsung\"\r\n    // tapi sudah pernah \"Disetujui\", PAKSA kembali ke \"Disetujui\"\r\n    const currentPengajuanFromBackend =\r\n      layananData?.pengajuan?.nama_status_kode?.toLowerCase() || \"\";\r\n    const currentDisplayLower = displayPengajuanStatus.toLowerCase();\r\n\r\n    // UPGRADE: Jika backend return \"Selesai\", upgrade display status ke \"Selesai\" (status tertinggi)\r\n    if (\r\n      currentPengajuanFromBackend.includes(\"selesai\") &&\r\n      !currentDisplayLower.includes(\"selesai\")\r\n    ) {\r\n      console.log(\r\n        \"[ADMIN DEBUG] Upgrading pengajuan status to Selesai from backend\"\r\n      );\r\n      setDisplayPengajuanStatus(\"Selesai\");\r\n      return; // Stop further processing\r\n    }\r\n\r\n    // Jika backend return \"berlangsung\" tapi ada indikasi sudah disetujui\r\n    if (currentPengajuanFromBackend.includes(\"berlangsung\")) {\r\n      // Cek: apakah sudah ada progress (MOU, pelaksanaan, atau display status sebelumnya \"disetujui\")\r\n      const hasProgress =\r\n        layananData?.mou?.id ||\r\n        layananData?.pelaksanaan?.id ||\r\n        currentDisplayLower.includes(\"disetujui\") ||\r\n        currentDisplayLower.includes(\"selesai\");\r\n\r\n      if (\r\n        hasProgress &&\r\n        !currentDisplayLower.includes(\"disetujui\") &&\r\n        !currentDisplayLower.includes(\"selesai\")\r\n      ) {\r\n        console.log(\r\n          \"[ADMIN DEBUG] Backend returned Berlangsung but has progress - forcing back to Disetujui\"\r\n        );\r\n        setDisplayPengajuanStatus(\"Disetujui\");\r\n      }\r\n    }\r\n\r\n    // Extra defense: Jika display status sudah \"Disetujui\" tapi backend coba override ke apapun\r\n    // KECUALI \"Ditolak\" atau \"Selesai\" (status yang lebih tinggi)\r\n    if (\r\n      currentDisplayLower.includes(\"disetujui\") &&\r\n      !currentPengajuanFromBackend.includes(\"disetujui\") &&\r\n      !currentPengajuanFromBackend.includes(\"ditolak\") &&\r\n      !currentPengajuanFromBackend.includes(\"selesai\") // EXCEPTION: \"Selesai\" boleh override \"Disetujui\"\r\n    ) {\r\n      console.log(\r\n        \"[ADMIN DEBUG] Protecting Disetujui status from backend override:\",\r\n        currentPengajuanFromBackend\r\n      );\r\n      setDisplayPengajuanStatus(\"Disetujui\");\r\n    }\r\n  }, [\r\n    layananData,\r\n    isStatusInitialized,\r\n    displayPengajuanStatus,\r\n    displayPelaksanaanStatus,\r\n  ]);\r\n\r\n  // Auto-refresh polling untuk sync data real-time\r\n  useEffect(() => {\r\n    if (!params?.id || loading) return;\r\n    const pollInterval = setInterval(async () => {\r\n      try {\r\n        const data = await fetchLayananById(Number(params.id), {\r\n          include_jenis: true,\r\n          include_peserta: true,\r\n          include_mou: true,\r\n          include_sertifikat: true,\r\n          include_laporan: true,\r\n          include_rejection: true,\r\n          include_pengajuan: true,\r\n          include_pelaksanaan: true,\r\n        });\r\n        setLayananData(data);\r\n      } catch (err) {\r\n        console.error(\"[Admin] Error polling:\", err);\r\n      }\r\n    }, 10000); // 10 seconds - auto refresh untuk melihat perubahan dari user\r\n    return () => clearInterval(pollInterval);\r\n  }, [params?.id, loading]);\r\n\r\n  // Helper: build file URL\r\n  const resolveFileUrl = (path?: string | null): string | null => {\r\n    if (!path) return null;\r\n    const trimmed = path.trim();\r\n    if (\r\n      trimmed === \"\" ||\r\n      trimmed.toLowerCase() === \"null\" ||\r\n      trimmed.toLowerCase() === \"undefined\"\r\n    )\r\n      return null;\r\n    if (/^https?:\\/\\//i.test(trimmed)) return trimmed;\r\n    const base = (process.env.NEXT_PUBLIC_API_URL || \"\").replace(/\\/$/, \"\");\r\n    const p = trimmed.startsWith(\"/\") ? trimmed : `/${trimmed}`;\r\n    return `${base}${p}`;\r\n  };\r\n\r\n  const openFile = (url: string | null) => {\r\n    if (!url) return;\r\n    if (typeof window !== \"undefined\")\r\n      window.open(url, \"_blank\", \"noopener,noreferrer\");\r\n  };\r\n\r\n  const downloadFile = (url: string | null, filename?: string) => {\r\n    if (!url || typeof document === \"undefined\") return;\r\n    fetch(url)\r\n      .then((response) => {\r\n        if (!response.ok) throw new Error(\"Network response was not ok\");\r\n        return response.blob();\r\n      })\r\n      .then((blob) => {\r\n        const blobUrl = window.URL.createObjectURL(blob);\r\n        const a = document.createElement(\"a\");\r\n        a.href = blobUrl;\r\n        a.download = filename || \"download.pdf\";\r\n        a.style.display = \"none\";\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        window.URL.revokeObjectURL(blobUrl);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Download error:\", error);\r\n        window.open(url, \"_blank\");\r\n      });\r\n  };\r\n\r\n  const goNext = (current: StepKey) => {\r\n    const order: StepKey[] = [\r\n      \"pengajuan\",\r\n      \"mou\",\r\n      \"pelaksanaan\",\r\n      \"laporan\",\r\n      \"sertifikat\",\r\n    ];\r\n    const idx = order.indexOf(current);\r\n    const next = order[idx + 1];\r\n    setSteps((prev) => ({\r\n      ...prev,\r\n      [current]: \"done\",\r\n      ...(next ? { [next]: \"active\" } : {}),\r\n    }));\r\n  };\r\n\r\n  // Approve Pengajuan\r\n  const handleApprovePengajuan = async () => {\r\n    if (!layananData) return;\r\n\r\n    const Swal = (await import(\"sweetalert2\")).default;\r\n    const result = await Swal.fire({\r\n      title: \"Apakah Anda yakin ingin menyetujui pengajuan ini?\",\r\n      html: \"pastikan semua data yang diajukan sudah sesuai\",\r\n      showCancelButton: true,\r\n      cancelButtonText: \"Batal\",\r\n      confirmButtonText: \"Yakin\",\r\n      confirmButtonColor: \"#4E342E\",\r\n      customClass: { popup: \"rounded-xl\" },\r\n    });\r\n\r\n    if (result.isConfirmed) {\r\n      try {\r\n        Swal.fire({\r\n          title: \"Memproses...\",\r\n          text: \"Mohon tunggu sebentar\",\r\n          allowOutsideClick: false,\r\n          didOpen: () => {\r\n            Swal.showLoading();\r\n          },\r\n        });\r\n\r\n        await acceptPengajuan(layananData.id);\r\n\r\n        // Optimistic update - immediately change status in local state\r\n        setDisplayPengajuanStatus(\"Disetujui\");\r\n        setDisplayPelaksanaanStatus(\"Belum Terlaksana\");\r\n\r\n        setLayananData((prev) =>\r\n          prev\r\n            ? {\r\n                ...prev,\r\n                pengajuan: {\r\n                  ...prev.pengajuan,\r\n                  nama_status_kode: \"Disetujui\",\r\n                },\r\n                pelaksanaan: {\r\n                  ...prev.pelaksanaan,\r\n                  nama_status_kode: \"Belum Terlaksana\",\r\n                },\r\n              }\r\n            : null\r\n        );\r\n\r\n        // Reload data from server (will be overridden by backend bug, but optimistic update already applied)\r\n        const updated = await fetchLayananById(layananData.id, {\r\n          include_jenis: true,\r\n          include_peserta: true,\r\n          include_mou: true,\r\n          include_sertifikat: true,\r\n          include_laporan: true,\r\n          include_rejection: true,\r\n        });\r\n\r\n        // Only update if backend returns correct status (won't happen until backend fixed)\r\n        // Keep optimistic update if backend still buggy\r\n        if (\r\n          updated.pengajuan?.nama_status_kode\r\n            ?.toLowerCase()\r\n            .includes(\"disetujui\")\r\n        ) {\r\n          setLayananData(updated);\r\n        }\r\n\r\n        await Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Pengajuan Disetujui\",\r\n          html: \"Pengajuan berhasil disetujui.\",\r\n          confirmButtonColor: \"#4E342E\",\r\n          customClass: { popup: \"rounded-xl\" },\r\n        });\r\n      } catch (error: any) {\r\n        await Swal.fire({\r\n          icon: \"error\",\r\n          title: \"Gagal Menyetujui\",\r\n          text: error.message || \"Terjadi kesalahan\",\r\n          confirmButtonColor: \"#4E342E\",\r\n          customClass: { popup: \"rounded-xl\" },\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  // Reject Pengajuan\r\n  const handleRejectPengajuan = async () => {\r\n    if (!layananData) return;\r\n\r\n    const Swal = (await import(\"sweetalert2\")).default;\r\n    const { value: text, isConfirmed } = await Swal.fire({\r\n      title: \"Tolak Pengajuan\",\r\n      html: `berikan alasan penolakan untuk membantu peserta memahami dan memperbaiki pengajuan mereka`,\r\n      input: \"textarea\",\r\n      inputLabel: \"alasan Penolakan\",\r\n      inputPlaceholder:\r\n        \"Contoh : Dokumen yang di Upload Tidak lengkap. Pada bagian Proposal tidak disertakan ttd pihak Instansi\",\r\n      inputAttributes: { \"aria-label\": \"Alasan\" },\r\n      showCancelButton: true,\r\n      cancelButtonText: \"Batal\",\r\n      confirmButtonText: \"Tolak\",\r\n      confirmButtonColor: \"#4E342E\",\r\n      focusConfirm: false,\r\n      customClass: { popup: \"rounded-xl\" },\r\n    });\r\n\r\n    if (isConfirmed) {\r\n      if (!text || text.trim() === \"\") {\r\n        await Swal.fire({\r\n          icon: \"warning\",\r\n          title: \"Alasan Wajib Diisi\",\r\n          text: \"Mohon berikan alasan penolakan\",\r\n          confirmButtonColor: \"#4E342E\",\r\n          customClass: { popup: \"rounded-xl\" },\r\n        });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        Swal.fire({\r\n          title: \"Memproses...\",\r\n          text: \"Mohon tunggu sebentar\",\r\n          allowOutsideClick: false,\r\n          didOpen: () => {\r\n            Swal.showLoading();\r\n          },\r\n        });\r\n\r\n        await rejectPengajuan(layananData.id, text);\r\n\r\n        // Optimistic update - immediately change status in local state\r\n        setDisplayPengajuanStatus(\"Ditolak\");\r\n        setDisplayPelaksanaanStatus(\"Ditolak\");\r\n\r\n        setLayananData((prev) =>\r\n          prev\r\n            ? {\r\n                ...prev,\r\n                pengajuan: {\r\n                  ...prev.pengajuan,\r\n                  nama_status_kode: \"Ditolak\",\r\n                },\r\n                pelaksanaan: {\r\n                  ...prev.pelaksanaan,\r\n                  nama_status_kode: \"Ditolak\",\r\n                },\r\n                layananRejection: Array.isArray(prev.layananRejection)\r\n                  ? [{ id: Date.now(), id_layanan: prev.id, alasan: text }]\r\n                  : { id: Date.now(), id_layanan: prev.id, alasan: text },\r\n              }\r\n            : null\r\n        );\r\n\r\n        // Reload data from server\r\n        const updated = await fetchLayananById(layananData.id, {\r\n          include_jenis: true,\r\n          include_peserta: true,\r\n          include_mou: true,\r\n          include_sertifikat: true,\r\n          include_laporan: true,\r\n          include_rejection: true,\r\n        });\r\n\r\n        // Merge: keep optimistic status if backend buggy, but use backend rejection data if available\r\n        setLayananData((prev) => ({\r\n          ...updated,\r\n          pengajuan: updated.pengajuan?.nama_status_kode\r\n            ?.toLowerCase()\r\n            .includes(\"ditolak\")\r\n            ? updated.pengajuan\r\n            : prev?.pengajuan || updated.pengajuan,\r\n          pelaksanaan: updated.pelaksanaan?.nama_status_kode\r\n            ?.toLowerCase()\r\n            .includes(\"ditolak\")\r\n            ? updated.pelaksanaan\r\n            : prev?.pelaksanaan || updated.pelaksanaan,\r\n          layananRejection: updated.layananRejection || prev?.layananRejection,\r\n        }));\r\n\r\n        await Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Pengajuan Berhasil Ditolak\",\r\n          html: `<p class=\"text-sm mb-2\">Alasan Penolakan:</p><p class=\"text-sm font-semibold\">${text}</p>`,\r\n          confirmButtonColor: \"#4E342E\",\r\n          customClass: { popup: \"rounded-xl\" },\r\n        });\r\n      } catch (error: any) {\r\n        await Swal.fire({\r\n          icon: \"error\",\r\n          title: \"Gagal Menolak\",\r\n          text: error.message || \"Terjadi kesalahan\",\r\n          confirmButtonColor: \"#4E342E\",\r\n          customClass: { popup: \"rounded-xl\" },\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  // Approve MOU\r\n  const handleApproveMou = async () => {\r\n    if (!layananData?.mou?.id) return;\r\n\r\n    const Swal = (await import(\"sweetalert2\")).default;\r\n    const result = await Swal.fire({\r\n      title: \"Apakah Anda yakin ingin menyetujui MOU ini?\",\r\n      html: \"pastikan dokumen MOU yang diajukan sudah sesuai\",\r\n      showCancelButton: true,\r\n      cancelButtonText: \"Batal\",\r\n      confirmButtonText: \"Yakin\",\r\n      confirmButtonColor: \"#4E342E\",\r\n      customClass: { popup: \"rounded-xl\" },\r\n    });\r\n\r\n    if (result.isConfirmed) {\r\n      try {\r\n        Swal.fire({\r\n          title: \"Memproses...\",\r\n          text: \"Mohon tunggu sebentar\",\r\n          allowOutsideClick: false,\r\n          didOpen: () => {\r\n            Swal.showLoading();\r\n          },\r\n        });\r\n\r\n        await approveMou(layananData.mou.id);\r\n\r\n        // Reload data\r\n        const updated = await fetchLayananById(layananData.id, {\r\n          include_jenis: true,\r\n          include_peserta: true,\r\n          include_mou: true,\r\n          include_sertifikat: true,\r\n          include_laporan: true,\r\n          include_rejection: true,\r\n        });\r\n        setLayananData(updated);\r\n\r\n        goNext(\"mou\");\r\n\r\n        await Swal.fire({\r\n          icon: \"success\",\r\n          title: \"MOU Disetujui\",\r\n          html: \"MOU berhasil disetujui\",\r\n          confirmButtonColor: \"#4E342E\",\r\n          customClass: { popup: \"rounded-xl\" },\r\n        });\r\n      } catch (error: any) {\r\n        await Swal.fire({\r\n          icon: \"error\",\r\n          title: \"Gagal Menyetujui MOU\",\r\n          text: error.message || \"Terjadi kesalahan\",\r\n          confirmButtonColor: \"#4E342E\",\r\n          customClass: { popup: \"rounded-xl\" },\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  // Reject MOU\r\n  const handleRejectMou = async () => {\r\n    if (!layananData?.mou?.id) return;\r\n\r\n    const Swal = (await import(\"sweetalert2\")).default;\r\n    const { value: text, isConfirmed } = await Swal.fire({\r\n      title: \"Tolak MOU\",\r\n      html: `berikan alasan penolakan untuk membantu peserta memahami dan memperbaiki MOU mereka`,\r\n      input: \"textarea\",\r\n      inputLabel: \"alasan Penolakan\",\r\n      inputPlaceholder:\r\n        \"Contoh : MOU belum ditandatangani oleh pihak yang berwenang\",\r\n      inputAttributes: { \"aria-label\": \"Alasan\" },\r\n      showCancelButton: true,\r\n      cancelButtonText: \"Batal\",\r\n      confirmButtonText: \"Tolak\",\r\n      confirmButtonColor: \"#4E342E\",\r\n      focusConfirm: false,\r\n      customClass: { popup: \"rounded-xl\" },\r\n    });\r\n\r\n    if (isConfirmed) {\r\n      if (!text || text.trim() === \"\") {\r\n        await Swal.fire({\r\n          icon: \"warning\",\r\n          title: \"Alasan Wajib Diisi\",\r\n          text: \"Mohon berikan alasan penolakan\",\r\n          confirmButtonColor: \"#4E342E\",\r\n          customClass: { popup: \"rounded-xl\" },\r\n        });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        Swal.fire({\r\n          title: \"Memproses...\",\r\n          text: \"Mohon tunggu sebentar\",\r\n          allowOutsideClick: false,\r\n          didOpen: () => {\r\n            Swal.showLoading();\r\n          },\r\n        });\r\n\r\n        await rejectMou(layananData.mou.id, text);\r\n\r\n        // Reload data\r\n        const updated = await fetchLayananById(layananData.id, {\r\n          include_jenis: true,\r\n          include_peserta: true,\r\n          include_mou: true,\r\n          include_sertifikat: true,\r\n          include_laporan: true,\r\n          include_rejection: true,\r\n        });\r\n        setLayananData(updated);\r\n\r\n        await Swal.fire({\r\n          icon: \"success\",\r\n          title: \"MOU Berhasil Ditolak\",\r\n          html: text && text.length > 0 ? text : \"MOU ditolak.\",\r\n          confirmButtonColor: \"#4E342E\",\r\n          customClass: { popup: \"rounded-xl\" },\r\n        });\r\n      } catch (error: any) {\r\n        await Swal.fire({\r\n          icon: \"error\",\r\n          title: \"Gagal Menolak MOU\",\r\n          text: error.message || \"Terjadi kesalahan\",\r\n          confirmButtonColor: \"#4E342E\",\r\n          customClass: { popup: \"rounded-xl\" },\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  // Handle File Select for Sertifikat\r\n  const handleSertifikatFileChange = (\r\n    e: React.ChangeEvent<HTMLInputElement>\r\n  ) => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      const file = e.target.files[0];\r\n      // Validate file type (PDF only)\r\n      if (file.type !== \"application/pdf\") {\r\n        import(\"sweetalert2\").then(({ default: Swal }) => {\r\n          Swal.fire({\r\n            icon: \"error\",\r\n            title: \"File Tidak Valid\",\r\n            text: \"Hanya file PDF yang diperbolehkan\",\r\n            confirmButtonColor: \"#4E342E\",\r\n            customClass: { popup: \"rounded-xl\" },\r\n          });\r\n        });\r\n        return;\r\n      }\r\n      // Validate file size (max 10MB)\r\n      if (file.size > 10 * 1024 * 1024) {\r\n        import(\"sweetalert2\").then(({ default: Swal }) => {\r\n          Swal.fire({\r\n            icon: \"error\",\r\n            title: \"File Terlalu Besar\",\r\n            text: \"Ukuran file maksimal 10MB\",\r\n            confirmButtonColor: \"#4E342E\",\r\n            customClass: { popup: \"rounded-xl\" },\r\n          });\r\n        });\r\n        return;\r\n      }\r\n      setSertifikatFile(file);\r\n    }\r\n  };\r\n\r\n  // Handle Upload Sertifikat\r\n  const handleUploadSertifikat = async () => {\r\n    console.log(\"=== handleUploadSertifikat called ===\");\r\n    console.log(\"layananData:\", layananData?.id);\r\n    console.log(\"sertifikatFile:\", sertifikatFile?.name);\r\n\r\n    if (!layananData || !sertifikatFile) {\r\n      console.log(\"Validation failed - missing data\");\r\n      return;\r\n    }\r\n\r\n    const Swal = (await import(\"sweetalert2\")).default;\r\n    const result = await Swal.fire({\r\n      title: \"Upload Sertifikat?\",\r\n      text: \"Pastikan file sertifikat sudah benar\",\r\n      icon: \"question\",\r\n      showCancelButton: true,\r\n      cancelButtonText: \"Batal\",\r\n      confirmButtonText: \"Ya, Upload\",\r\n      confirmButtonColor: \"#4E342E\",\r\n      customClass: { popup: \"rounded-xl\" },\r\n    });\r\n\r\n    console.log(\"SweetAlert result:\", result.isConfirmed);\r\n\r\n    if (result.isConfirmed) {\r\n      try {\r\n        console.log(\"Starting upload process...\");\r\n        setUploadingSertifikat(true);\r\n        Swal.fire({\r\n          title: \"Mengupload...\",\r\n          text: \"Mohon tunggu sebentar\",\r\n          allowOutsideClick: false,\r\n          didOpen: () => {\r\n            Swal.showLoading();\r\n          },\r\n        });\r\n\r\n        console.log(\"Calling createSertifikat API...\");\r\n        await createSertifikat({\r\n          id_layanan: layananData.id,\r\n          link_sertifikat: sertifikatLink || undefined,\r\n          file_sertifikat: sertifikatFile,\r\n        });\r\n\r\n        console.log(\"Upload successful, reloading data...\");\r\n        // Reload data\r\n        const updated = await fetchLayananById(layananData.id, {\r\n          include_jenis: true,\r\n          include_peserta: true,\r\n          include_mou: true,\r\n          include_sertifikat: true,\r\n          include_laporan: true,\r\n          include_rejection: true,\r\n        });\r\n        setLayananData(updated);\r\n\r\n        // Reset form\r\n        setSertifikatFile(null);\r\n        setSertifikatLink(\"\");\r\n        if (fileInputRef.current) {\r\n          fileInputRef.current.value = \"\";\r\n        }\r\n\r\n        // Get jenis layanan name\r\n        const jenisLayananName =\r\n          updated?.jenisLayanan?.nama_jenis_layanan ||\r\n          updated?.jenis_layanan?.nama_jenis_layanan ||\r\n          layananData?.jenisLayanan?.nama_jenis_layanan ||\r\n          layananData?.jenis_layanan?.nama_jenis_layanan ||\r\n          \"kegiatan ini\";\r\n\r\n        await Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Sertifikat Berhasil Diupload\",\r\n          text: `Sertifikat untuk ${jenisLayananName} telah tersedia dan dapat diunduh oleh peserta.`,\r\n          confirmButtonColor: \"#4E342E\",\r\n          customClass: { popup: \"rounded-xl\" },\r\n        });\r\n      } catch (error: any) {\r\n        await Swal.fire({\r\n          icon: \"error\",\r\n          title: \"Gagal Upload Sertifikat\",\r\n          text: error.message || \"Terjadi kesalahan\",\r\n          confirmButtonColor: \"#4E342E\",\r\n          customClass: { popup: \"rounded-xl\" },\r\n        });\r\n      } finally {\r\n        setUploadingSertifikat(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const sendCertificateAlert = async () => {\r\n    const Swal = (await import(\"sweetalert2\")).default;\r\n    const confirm = await Swal.fire({\r\n      title: \"Kirim Sertifikat?\",\r\n      html: \"Sertifikat akan dikirim ke peserta. Pastikan file sudah benar.\",\r\n      showCancelButton: true,\r\n      cancelButtonText: \"Batal\",\r\n      confirmButtonText: \"Kirim\",\r\n      confirmButtonColor: \"#4E342E\",\r\n      customClass: { popup: \"rounded-xl\" },\r\n    });\r\n    if (confirm.isConfirmed) {\r\n      await Swal.fire({\r\n        icon: \"success\",\r\n        title: \"Sertifikat Dikirim\",\r\n        html: \"Sertifikat berhasil dikirim ke peserta.\",\r\n        confirmButtonColor: \"#4E342E\",\r\n        customClass: { popup: \"rounded-xl\" },\r\n      });\r\n      setSteps((prev) => ({ ...prev, sertifikat: \"done\" }));\r\n    }\r\n  };\r\n\r\n  const StepItem = ({\r\n    label,\r\n    icon,\r\n    status,\r\n  }: {\r\n    label: string;\r\n    icon: React.ReactNode;\r\n    status: StepStatus;\r\n  }) => (\r\n    <div\r\n      className={`flex items-center gap-3 px-4 py-3 rounded-lg border transition-all duration-200 ${\r\n        status === \"active\"\r\n          ? \"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-300 shadow-sm\"\r\n          : status === \"done\"\r\n          ? \"bg-gradient-to-r from-green-50 to-emerald-50 border-green-300\"\r\n          : \"bg-gray-50 border-gray-200 opacity-50\"\r\n      }`}\r\n    >\r\n      <div\r\n        className={`shrink-0 h-9 w-9 grid place-items-center rounded-lg transition-all ${\r\n          status === \"active\"\r\n            ? \"bg-gradient-to-br from-blue-500 to-indigo-600 text-white shadow-md animate-pulse\"\r\n            : status === \"done\"\r\n            ? \"bg-gradient-to-br from-green-500 to-emerald-600 text-white\"\r\n            : \"bg-gray-300 text-gray-500\"\r\n        }`}\r\n      >\r\n        {icon}\r\n      </div>\r\n      <div\r\n        className={`text-sm font-semibold ${\r\n          status === \"active\"\r\n            ? \"text-blue-900\"\r\n            : status === \"done\"\r\n            ? \"text-green-900\"\r\n            : \"text-gray-500\"\r\n        }`}\r\n      >\r\n        {label}\r\n      </div>\r\n      {status === \"done\" && (\r\n        <span className=\"ml-auto inline-flex items-center gap-1 text-xs font-semibold text-green-700 bg-green-100 px-2 py-1 rounded-full\">\r\n          <Check size={12} /> Selesai\r\n        </span>\r\n      )}\r\n      {status === \"active\" && (\r\n        <span className=\"ml-auto inline-flex items-center gap-1 text-xs font-semibold text-blue-700\">\r\n          <div className=\"h-2 w-2 bg-blue-600 rounded-full animate-pulse\"></div>{\" \"}\r\n          Berlangsung\r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen\">\r\n        <div className=\"w-full px-4 md:px-6 py-6\">\r\n          <button\r\n            onClick={() => router.back()}\r\n            className=\"mb-4 cursor-pointer bg-amber-950 text-white px-3 py-2 rounded-xl flex items-center gap-1 hover:-translate-y-1 duration-150 ease-in text-sm\"\r\n          >\r\n            <ChevronLeft size={18} />\r\n            <span>Kembali</span>\r\n          </button>\r\n          <div className=\"animate-pulse space-y-4\">\r\n            <div className=\"h-8 bg-gray-200 rounded w-1/4\"></div>\r\n            <div className=\"h-64 bg-gray-200 rounded\"></div>\r\n            <div className=\"h-96 bg-gray-200 rounded\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (error || !layananData) {\r\n    return (\r\n      <div className=\"min-h-screen\">\r\n        <div className=\"w-full px-4 md:px-6 py-6\">\r\n          <button\r\n            onClick={() => router.back()}\r\n            className=\"mb-4 cursor-pointer bg-amber-950 text-white px-3 py-2 rounded-xl flex items-center gap-1 hover:-translate-y-1 duration-150 ease-in text-sm\"\r\n          >\r\n            <ChevronLeft size={18} />\r\n            <span>Kembali</span>\r\n          </button>\r\n          <div className=\"rounded-xl border border-red-200 bg-red-50 p-6 text-center\">\r\n            <h2 className=\"text-xl font-semibold text-red-800 mb-2\">\r\n              Gagal Memuat Data\r\n            </h2>\r\n            <p className=\"text-red-600 mb-4\">\r\n              {error || \"Data layanan tidak ditemukan\"}\r\n            </p>\r\n            <button\r\n              onClick={() => router.back()}\r\n              className=\"inline-flex items-center rounded-lg bg-red-600 text-white px-4 py-2 hover:bg-red-700\"\r\n            >\r\n              Kembali\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Get peserta info\r\n  const pesertaInfo = layananData.peserta?.[0];\r\n  const jenisNama =\r\n    layananData.jenisLayanan?.nama_jenis_layanan ||\r\n    layananData.jenis_layanan?.nama_jenis_layanan ||\r\n    \"\";\r\n\r\n  // Check if MOU workflow applies (PKL, Magang, Pelatihan)\r\n  const hasMouWorkflow = [\r\n    \"Magang\",\r\n    \"Praktek Kerja Lapangan (PKL)\",\r\n    \"Pelatihan\",\r\n  ].some((j) => jenisNama.includes(j));\r\n\r\n  // Check if it's simple workflow (Kunjungan, Undangan Narasumber - only Pengajuan + Pelaksanaan)\r\n  const isSimpleWorkflow = [\"Kunjungan\", \"Undangan Narasumber\"].some((j) =>\r\n    jenisNama.includes(j)\r\n  );\r\n\r\n  // Determine if pengajuan is in pending state (can approve/reject)\r\n  // Note: These are recalculated on every render to reflect optimistic updates\r\n  const statusPengajuan =\r\n    layananData?.pengajuan?.nama_status_kode?.toLowerCase() || \"\";\r\n  const statusPelaksanaan =\r\n    layananData?.pelaksanaan?.nama_status_kode?.toLowerCase() || \"\";\r\n\r\n  const isPengajuanPending =\r\n    statusPengajuan.includes(\"menunggu\") &&\r\n    !statusPengajuan.includes(\"disetujui\") &&\r\n    !statusPengajuan.includes(\"ditolak\");\r\n  const isPengajuanApproved = statusPengajuan.includes(\"disetujui\");\r\n  const isPengajuanRejected = statusPengajuan.includes(\"ditolak\");\r\n\r\n  // Compute display status untuk UI yang lebih akurat\r\n  // PENTING: Gunakan state yang stable, bukan langsung dari backend\r\n  const getDisplayPengajuanStatus = () => {\r\n    // Jika sudah ada display status yang di-set, gunakan itu (FINAL)\r\n    if (displayPengajuanStatus) {\r\n      const lower = displayPengajuanStatus.toLowerCase();\r\n      // Status final tidak boleh berubah\r\n      if (lower.includes(\"ditolak\")) return \"Ditolak\";\r\n      if (lower.includes(\"disetujui\")) return \"Disetujui\";\r\n\r\n      // Jika backend tiba-tiba return \"berlangsung\" tapi sudah ada progress, override ke \"Disetujui\"\r\n      if (\r\n        lower.includes(\"berlangsung\") &&\r\n        (layananData?.mou?.id || layananData?.pelaksanaan)\r\n      ) {\r\n        return \"Disetujui\";\r\n      }\r\n\r\n      return displayPengajuanStatus;\r\n    }\r\n\r\n    // Fallback ke backend (hanya untuk initial render)\r\n    const rawStatus = layananData?.pengajuan?.nama_status_kode || \"-\";\r\n    return rawStatus;\r\n  };\r\n\r\n  const getDisplayPelaksanaanStatus = () => {\r\n    // Untuk workflow simple (Kunjungan, Undangan Narasumber), skip pelaksanaan\r\n    if (isSimpleWorkflow) return \"-\";\r\n\r\n    const laporanData = Array.isArray(layananData?.laporan)\r\n      ? layananData.laporan[0]\r\n      : layananData?.laporan;\r\n    const hasLaporan = !!(laporanData?.id_laporan || laporanData?.id);\r\n\r\n    // Jika laporan sudah ada, pelaksanaan PASTI selesai (FINAL)\r\n    if (hasLaporan) return \"Selesai\";\r\n\r\n    // Gunakan stable state jika ada\r\n    if (displayPelaksanaanStatus) {\r\n      const lower = displayPelaksanaanStatus.toLowerCase();\r\n\r\n      // Status final\r\n      if (lower.includes(\"selesai\")) return \"Selesai\";\r\n      if (lower.includes(\"ditolak\")) return \"Ditolak\";\r\n\r\n      // Status in-progress\r\n      if (lower.includes(\"berjalan\") || lower.includes(\"berlangsung\"))\r\n        return \"Berlangsung\";\r\n\r\n      return displayPelaksanaanStatus;\r\n    }\r\n\r\n    // Fallback ke backend status\r\n    if (statusPelaksanaan.includes(\"selesai\")) return \"Selesai\";\r\n    if (statusPelaksanaan.includes(\"berjalan\")) return \"Berlangsung\";\r\n    if (statusPelaksanaan.includes(\"ditolak\")) return \"Ditolak\";\r\n\r\n    // Untuk MOU workflow, cek apakah MOU sudah disetujui\r\n    if (hasMouWorkflow) {\r\n      const statusMou =\r\n        layananData?.mou?.statusKode?.nama_status_kode?.toLowerCase() || \"\";\r\n      if (statusMou.includes(\"disetujui\")) {\r\n        return \"Belum Terlaksana\";\r\n      }\r\n    }\r\n\r\n    return layananData?.pelaksanaan?.nama_status_kode || \"-\";\r\n  };\r\n\r\n  // Determine if MOU is in pending state (can approve/reject)\r\n  const isMouPending =\r\n    layananData?.mou?.statusKode?.nama_status_kode\r\n      ?.toLowerCase()\r\n      .includes(\"menunggu\") &&\r\n    !layananData?.mou?.statusKode?.nama_status_kode\r\n      ?.toLowerCase()\r\n      .includes(\"disetujui\") &&\r\n    !layananData?.mou?.statusKode?.nama_status_kode\r\n      ?.toLowerCase()\r\n      .includes(\"ditolak\");\r\n\r\n  return (\r\n    <div className=\"min-h-screen\">\r\n      <div className=\"w-full px-4 md:px-6 py-6\">\r\n        <button\r\n          onClick={() => router.back()}\r\n          className=\"mb-4 cursor-pointer bg-amber-950 text-white px-3 py-2 rounded-xl flex items-center gap-1 hover:-translate-y-1 duration-150 ease-in text-sm\"\r\n        >\r\n          <ChevronLeft size={18} />\r\n          <span>Kembali</span>\r\n        </button>\r\n        <div className=\"mb-10\">\r\n          <h1 className=\"text-2xl font-bold text-center\">Detail Kegiatan</h1>\r\n          <p className=\"text-sm text-gray-500 text-center mt-1\">\r\n            Ringkasan kegiatan yang diikuti peserta di Sekolah Kopi Raisa\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n          {/* Sidebar Progress */}\r\n          <div className=\"md:col-span-1 bg-white rounded-xl border border-gray-100 p-5\">\r\n            <div className=\"mx-auto h-12 w-12 grid place-items-center rounded-xl bg-neutral-100 text-neutral-700\">\r\n              <Check />\r\n            </div>\r\n            <h3 className=\"text-center font-semibold mt-3\">Progres Kegiatan</h3>\r\n            <p className=\"text-center text-xs text-gray-500 mb-4\">\r\n              Pantau Status Pelaksanaan Kegiatan Anda\r\n            </p>\r\n            <div className=\"space-y-3\">\r\n              <StepItem\r\n                label=\"Pengajuan\"\r\n                icon={<FileText size={16} />}\r\n                status={steps.pengajuan}\r\n              />\r\n              {/* Simple workflow (Kunjungan, Undangan Narasumber): Pengajuan -> Laporan Akhir */}\r\n              {/* MOU workflow (PKL, Magang, Pelatihan): Pengajuan -> MOU -> Pelaksanaan -> Laporan -> Sertifikat */}\r\n              {isSimpleWorkflow ? (\r\n                <StepItem\r\n                  label=\"Laporan Akhir\"\r\n                  icon={<FileText size={16} />}\r\n                  status={steps.laporan}\r\n                />\r\n              ) : (\r\n                <>\r\n                  {/* MOU hanya untuk PKL, Magang, Pelatihan */}\r\n                  <StepItem\r\n                    label=\"MOU\"\r\n                    icon={<ShieldCheck size={16} />}\r\n                    status={steps.mou}\r\n                  />\r\n                  <StepItem\r\n                    label=\"Pelaksanaan\"\r\n                    icon={<ClipboardList size={16} />}\r\n                    status={steps.pelaksanaan}\r\n                  />\r\n                  <StepItem\r\n                    label=\"Laporan Akhir\"\r\n                    icon={<FileText size={16} />}\r\n                    status={steps.laporan}\r\n                  />\r\n                  <StepItem\r\n                    label=\"Sertifikat Kegiatan\"\r\n                    icon={<Award size={16} />}\r\n                    status={steps.sertifikat}\r\n                  />\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Pengajuan / MOU Content (always visible; actions still conditional) */}\r\n          <div className=\"md:col-span-2 bg-white rounded-xl border border-gray-100 p-5\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold\">\r\n                  Ringkasan Pengajuan & Dokumen\r\n                </h3>\r\n                <p className=\"text-sm text-gray-600\">\r\n                  Detail Informasi dan Dokumen yang telah anda Submit\r\n                </p>\r\n              </div>\r\n              {/* Status Badge */}\r\n              <div className=\"flex flex-col items-end gap-2\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-xs text-gray-500\">\r\n                    Status Pengajuan:\r\n                  </span>\r\n                  <span\r\n                    className={`px-3 py-1 text-xs font-medium rounded-full ${\r\n                      (getDisplayPengajuanStatus() || \"\")\r\n                        .toLowerCase()\r\n                        .includes(\"disetujui\")\r\n                        ? \"bg-green-100 text-green-700\"\r\n                        : (getDisplayPengajuanStatus() || \"\")\r\n                            .toLowerCase()\r\n                            .includes(\"ditolak\")\r\n                        ? \"bg-red-100 text-red-700\"\r\n                        : \"bg-yellow-100 text-yellow-700\"\r\n                    }`}\r\n                  >\r\n                    {getDisplayPengajuanStatus()}\r\n                  </span>\r\n                </div>\r\n                {/* Hide status pelaksanaan untuk Kunjungan & Undangan Narasumber */}\r\n                {!isSimpleWorkflow && (\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className=\"text-xs text-gray-500\">\r\n                      Status Pelaksanaan:\r\n                    </span>\r\n                    <span\r\n                      className={`px-3 py-1 text-xs font-medium rounded-full ${\r\n                        (getDisplayPelaksanaanStatus() || \"\")\r\n                          .toLowerCase()\r\n                          .includes(\"selesai\")\r\n                          ? \"bg-green-100 text-green-700\"\r\n                          : (getDisplayPelaksanaanStatus() || \"\")\r\n                              .toLowerCase()\r\n                              .includes(\"berlangsung\")\r\n                          ? \"bg-blue-100 text-blue-700\"\r\n                          : (getDisplayPelaksanaanStatus() || \"\")\r\n                              .toLowerCase()\r\n                              .includes(\"ditolak\")\r\n                          ? \"bg-red-100 text-red-700\"\r\n                          : \"bg-gray-100 text-gray-700\"\r\n                      }`}\r\n                    >\r\n                      {getDisplayPelaksanaanStatus()}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 bg-white border border-neutral-200 rounded-lg p-4 mb-4\">\r\n              <div>\r\n                <p className=\"text-xs text-gray-500\">Jenis Kegiatan</p>\r\n                <p className=\"text-sm\">{jenisNama || \"-\"}</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-xs text-gray-500\">Tanggal Mulai</p>\r\n                <p className=\"text-sm\">\r\n                  {layananData.tanggal_mulai\r\n                    ? formatDate(layananData.tanggal_mulai)\r\n                    : \"-\"}\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-xs text-gray-500\">Nama Peserta</p>\r\n                <p className=\"text-sm\">\r\n                  {pesertaInfo?.nama_peserta ||\r\n                    pesertaInfo?.nama ||\r\n                    layananData.pemohon?.name ||\r\n                    \"-\"}\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-xs text-gray-500\">Tanggal Selesai</p>\r\n                <p className=\"text-sm\">\r\n                  {layananData.tanggal_selesai\r\n                    ? formatDate(layananData.tanggal_selesai)\r\n                    : \"-\"}\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <p className=\"text-xs text-gray-500\">Instansi</p>\r\n                <p className=\"text-sm\">{layananData.instansi_asal || \"-\"}</p>\r\n              </div>\r\n              {/* Conditional: Show different fields based on jenis layanan */}\r\n              {jenisNama.includes(\"Undangan Narasumber\") ? (\r\n                <>\r\n                  <div>\r\n                    <p className=\"text-xs text-gray-500\">Nama Kegiatan</p>\r\n                    <p className=\"text-sm\">\r\n                      {layananData.nama_kegiatan || \"-\"}\r\n                    </p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-xs text-gray-500\">Tempat Kegiatan</p>\r\n                    <p className=\"text-sm\">\r\n                      {layananData.tempat_kegiatan || \"-\"}\r\n                    </p>\r\n                  </div>\r\n                </>\r\n              ) : !jenisNama.includes(\"Kunjungan\") ? (\r\n                <div>\r\n                  <p className=\"text-xs text-gray-500\">Kegiatan yang dipilih</p>\r\n                  <p className=\"text-sm\">\r\n                    {layananData.kegiatan\r\n                      ?.map((k: any) => k.nama_kegiatan)\r\n                      .join(\", \") || \"-\"}\r\n                  </p>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n\r\n            {/* Dokumen */}\r\n            <div>\r\n              <p className=\"text-sm font-semibold mb-3\">\r\n                Dokumen yang diupload\r\n              </p>\r\n              <div className=\"space-y-3\">\r\n                {/* Undangan Narasumber: file_proposal (terpisah) */}\r\n                {isSimpleWorkflow &&\r\n                  jenisNama.includes(\"Undangan Narasumber\") &&\r\n                  layananData.file_proposal && (\r\n                    <div className=\"bg-white rounded-xl border border-gray-100 p-3 flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"h-8 w-8 grid place-items-center rounded-md bg-neutral-200 text-neutral-700\">\r\n                          <FileText size={16} />\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-sm font-medium\">Proposal</p>\r\n                          <p className=\"text-xs text-gray-500\">Proposal.pdf</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <button\r\n                          onClick={() =>\r\n                            openFile(resolveFileUrl(layananData.file_proposal))\r\n                          }\r\n                          className=\"px-3 py-1.5 text-xs rounded-md border border-gray-200 hover:bg-gray-50 flex items-center gap-1\"\r\n                        >\r\n                          <Eye size={14} /> Lihat\r\n                        </button>\r\n                        <button\r\n                          onClick={() =>\r\n                            downloadFile(\r\n                              resolveFileUrl(layananData.file_proposal),\r\n                              \"Proposal.pdf\"\r\n                            )\r\n                          }\r\n                          className=\"px-3 py-1.5 text-xs rounded-md bg-gray-100 hover:bg-gray-200 flex items-center gap-1\"\r\n                        >\r\n                          <Download size={14} /> Download\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                {/* Proposal/Surat Permohonan (untuk layanan lain) */}\r\n                {!jenisNama.includes(\"Undangan Narasumber\") &&\r\n                  (layananData.file_proposal ||\r\n                    layananData.file_surat_permohonan) && (\r\n                    <div className=\"bg-white rounded-xl border border-gray-100 p-3 flex items-center justify-between\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"h-8 w-8 grid place-items-center rounded-md bg-neutral-200 text-neutral-700\">\r\n                          <FileText size={16} />\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-sm font-medium\">\r\n                            Proposal / Surat Permohonan\r\n                          </p>\r\n                          <p className=\"text-xs text-gray-500\">\r\n                            ProposalSuratPermohonan.pdf\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <button\r\n                          onClick={() =>\r\n                            openFile(\r\n                              resolveFileUrl(\r\n                                layananData.file_proposal ||\r\n                                  layananData.file_surat_permohonan\r\n                              )\r\n                            )\r\n                          }\r\n                          className=\"px-3 py-1.5 text-xs rounded-md border border-gray-200 hover:bg-gray-50 flex items-center gap-1\"\r\n                        >\r\n                          <Eye size={14} /> Lihat\r\n                        </button>\r\n                        <button\r\n                          onClick={() =>\r\n                            downloadFile(\r\n                              resolveFileUrl(\r\n                                layananData.file_proposal ||\r\n                                  layananData.file_surat_permohonan\r\n                              ),\r\n                              \"ProposalSuratPermohonan.pdf\"\r\n                            )\r\n                          }\r\n                          className=\"px-3 py-1.5 text-xs rounded-md bg-gray-100 hover:bg-gray-200 flex items-center gap-1\"\r\n                        >\r\n                          <Download size={14} /> Download\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                {/* Surat Pengantar */}\r\n                {layananData.file_surat_pengantar && (\r\n                  <div className=\"bg-white rounded-xl border border-gray-100 p-3 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"h-8 w-8 grid place-items-center rounded-md bg-neutral-200 text-neutral-700\">\r\n                        <FileText size={16} />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-sm font-medium\">Surat Pengantar</p>\r\n                        <p className=\"text-xs text-gray-500\">\r\n                          SuratPengantar.pdf\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button\r\n                        onClick={() =>\r\n                          openFile(\r\n                            resolveFileUrl(layananData.file_surat_pengantar)\r\n                          )\r\n                        }\r\n                        className=\"px-3 py-1.5 text-xs rounded-md border border-gray-200 hover:bg-gray-50 flex items-center gap-1\"\r\n                      >\r\n                        <Eye size={14} /> Lihat\r\n                      </button>\r\n                      <button\r\n                        onClick={() =>\r\n                          downloadFile(\r\n                            resolveFileUrl(layananData.file_surat_pengantar),\r\n                            \"SuratPengantar.pdf\"\r\n                          )\r\n                        }\r\n                        className=\"px-3 py-1.5 text-xs rounded-md bg-gray-100 hover:bg-gray-200 flex items-center gap-1\"\r\n                      >\r\n                        <Download size={14} /> Download\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Surat Undangan - untuk Undangan Narasumber */}\r\n                {layananData.file_surat_undangan && (\r\n                  <div className=\"bg-white rounded-xl border border-gray-100 p-3 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"h-8 w-8 grid place-items-center rounded-md bg-neutral-200 text-neutral-700\">\r\n                        <FileText size={16} />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-sm font-medium\">Surat Undangan</p>\r\n                        <p className=\"text-xs text-gray-500\">\r\n                          SuratUndangan.pdf\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button\r\n                        onClick={() =>\r\n                          openFile(\r\n                            resolveFileUrl(layananData.file_surat_undangan)\r\n                          )\r\n                        }\r\n                        className=\"px-3 py-1.5 text-xs rounded-md border border-gray-200 hover:bg-gray-50 flex items-center gap-1\"\r\n                      >\r\n                        <Eye size={14} /> Lihat\r\n                      </button>\r\n                      <button\r\n                        onClick={() =>\r\n                          downloadFile(\r\n                            resolveFileUrl(layananData.file_surat_undangan),\r\n                            \"SuratUndangan.pdf\"\r\n                          )\r\n                        }\r\n                        className=\"px-3 py-1.5 text-xs rounded-md bg-gray-100 hover:bg-gray-200 flex items-center gap-1\"\r\n                      >\r\n                        <Download size={14} /> Download\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* MOU - tampilkan HANYA untuk PKL, Magang, Pelatihan */}\r\n                {hasMouWorkflow && layananData.mou?.file_mou && (\r\n                  <div className=\"bg-white rounded-xl border border-gray-100 p-3 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"h-8 w-8 grid place-items-center rounded-md bg-neutral-200 text-neutral-700\">\r\n                        <ShieldCheck size={16} />\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-sm font-medium\">MOU</p>\r\n                        <p className=\"text-xs text-gray-500\">MOU.pdf</p>\r\n                        {layananData.mou.statusKode?.nama_status_kode && (\r\n                          <span\r\n                            className={`text-xs ${\r\n                              layananData.mou.statusKode.nama_status_kode\r\n                                .toLowerCase()\r\n                                .includes(\"disetujui\")\r\n                                ? \"text-green-600\"\r\n                                : layananData.mou.statusKode.nama_status_kode\r\n                                    .toLowerCase()\r\n                                    .includes(\"ditolak\")\r\n                                ? \"text-red-600\"\r\n                                : \"text-yellow-600\"\r\n                            }`}\r\n                          >\r\n                            {layananData.mou.statusKode.nama_status_kode}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button\r\n                        onClick={() =>\r\n                          openFile(resolveFileUrl(layananData.mou?.file_mou))\r\n                        }\r\n                        className=\"px-3 py-1.5 text-xs rounded-md border border-gray-200 hover:bg-gray-50 flex items-center gap-1\"\r\n                      >\r\n                        <Eye size={14} /> Lihat\r\n                      </button>\r\n                      <button\r\n                        onClick={() =>\r\n                          downloadFile(\r\n                            resolveFileUrl(layananData.mou?.file_mou),\r\n                            \"MOU.pdf\"\r\n                          )\r\n                        }\r\n                        className=\"px-3 py-1.5 text-xs rounded-md bg-gray-100 hover:bg-gray-200 flex items-center gap-1\"\r\n                      >\r\n                        <Download size={14} /> Download\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Show Pengajuan rejection reason if rejected - SEMUA layanan */}\r\n                {(() => {\r\n                  const rejection = layananData.layananRejection;\r\n                  const alasan =\r\n                    layananData.pengajuanRejection?.alasan ||\r\n                    (Array.isArray(rejection)\r\n                      ? rejection[0]?.alasan\r\n                      : rejection?.alasan) ||\r\n                    layananData.rejection?.alasan ||\r\n                    layananData.pengajuan?.alasan_penolakan ||\r\n                    layananData.alasan_penolakan;\r\n\r\n                  return alasan ? (\r\n                    <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\r\n                      <p className=\"text-sm font-semibold text-red-700 mb-1\">\r\n                        Alasan Penolakan Pengajuan\r\n                      </p>\r\n                      <p className=\"text-xs text-red-600 whitespace-pre-wrap\">\r\n                        {alasan}\r\n                      </p>\r\n                    </div>\r\n                  ) : null;\r\n                })()}\r\n\r\n                {/* Show MOU rejection reason if rejected - HANYA untuk PKL, Magang, Pelatihan */}\r\n                {hasMouWorkflow && layananData.mou?.mouRejection?.alasan && (\r\n                  <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\r\n                    <p className=\"text-sm font-semibold text-red-700 mb-1\">\r\n                      Alasan Penolakan MOU\r\n                    </p>\r\n                    <p className=\"text-xs text-red-600 whitespace-pre-wrap\">\r\n                      {layananData.mou.mouRejection.alasan}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Actions shown only for Pengajuan/MOU */}\r\n            {isPengajuanPending && (\r\n              <div className=\"mt-4 justify-center flex items-center gap-3\">\r\n                {/* Tolak Pengajuan */}\r\n                <button\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 text-sm rounded-md bg-rose-50 text-rose-700 border border-rose-200 hover:bg-rose-100\"\r\n                  onClick={handleRejectPengajuan}\r\n                >\r\n                   Tolak Pengajuan\r\n                </button>\r\n                {/* Setujui Pengajuan */}\r\n                <button\r\n                  className=\"inline-flex items-center gap-2 px-4 py-2 text-sm rounded-md bg-amber-900 text-white hover:bg-amber-950\"\r\n                  onClick={handleApprovePengajuan}\r\n                >\r\n                   Setujui Pengajuan\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Show MOU actions if workflow applies and MOU is pending */}\r\n            {hasMouWorkflow && isMouPending && layananData.mou?.file_mou && (\r\n              <>\r\n                {/* Badge indikator jika MOU pernah ditolak (upload ulang) */}\r\n                {layananData.mou?.mouRejection && (\r\n                  <div className=\"mt-4 mb-2\">\r\n                    <div className=\"inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium rounded-full bg-orange-100 text-orange-700 border border-orange-200\">\r\n                      <svg\r\n                        className=\"w-4 h-4\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <path\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                          strokeWidth={2}\r\n                          d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\r\n                        />\r\n                      </svg>\r\n                      MOU Upload Ulang (Revisi)\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-500 mt-1\">\r\n                      User telah mengupload ulang MOU setelah sebelumnya ditolak\r\n                    </p>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"mt-4 justify-center flex items-center gap-3\">\r\n                  {/* Tolak MOU */}\r\n                  <button\r\n                    className=\"inline-flex items-center gap-2 px-4 py-2 text-sm rounded-md bg-rose-50 text-rose-700 border border-rose-200 hover:bg-rose-100\"\r\n                    onClick={handleRejectMou}\r\n                  >\r\n                     Tolak MOU\r\n                  </button>\r\n                  {/* Setujui MOU */}\r\n                  <button\r\n                    className=\"inline-flex items-center gap-2 px-4 py-2 text-sm rounded-md bg-amber-900 text-white hover:bg-amber-950\"\r\n                    onClick={handleApproveMou}\r\n                  >\r\n                     Setujui MOU\r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Logbook Section - Hanya untuk PKL, Magang, Pelatihan */}\r\n          {hasMouWorkflow && layananData.link_logbook && (\r\n            <div className=\"md:col-span-3 bg-white rounded-xl border border-gray-100 p-5 mt-6\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"h-12 w-12 grid place-items-center rounded-xl bg-blue-100 text-blue-700\">\r\n                    <ClipboardList size={24} />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold\">Logbook Kegiatan</h3>\r\n                    <p className=\"text-sm text-gray-600\">\r\n                      Link logbook yang telah disubmit oleh peserta\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700 border border-blue-200\">\r\n                   Tersedia\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                <p className=\"text-xs text-gray-500 mb-2\">Link Logbook:</p>\r\n                <a\r\n                  href={layananData.link_logbook}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"text-sm text-blue-600 hover:text-blue-800 hover:underline break-all\"\r\n                >\r\n                  {layananData.link_logbook}\r\n                </a>\r\n                <div className=\"mt-3\">\r\n                  <a\r\n                    href={layananData.link_logbook}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"inline-flex items-center gap-2 px-4 py-2 text-sm rounded-md bg-blue-600 text-white hover:bg-blue-700\"\r\n                  >\r\n                    <Eye size={16} /> Buka Logbook\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Laporan Akhir Section */}\r\n          {(() => {\r\n            const laporanData = Array.isArray(layananData?.laporan)\r\n              ? layananData.laporan[0]\r\n              : layananData?.laporan;\r\n            const hasLaporan = !!(laporanData?.id_laporan || laporanData?.id);\r\n\r\n            if (!hasLaporan) return null;\r\n\r\n            const fotoUrl = resolveFileUrl(laporanData?.foto_kegiatan);\r\n\r\n            return (\r\n              <div className=\"md:col-span-3 bg-white rounded-xl border border-gray-100 p-5 mt-6\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"h-12 w-12 grid place-items-center rounded-xl bg-green-100 text-green-700\">\r\n                      <FileText size={24} />\r\n                    </div>\r\n                    <div>\r\n                      <h3 className=\"text-lg font-semibold\">\r\n                        Laporan Akhir Kegiatan\r\n                      </h3>\r\n                      <p className=\"text-sm text-gray-600\">\r\n                        Laporan yang telah disubmit oleh peserta\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700 border border-green-200\">\r\n                     Telah Terisi\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                  {/* Nama P4S */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Nama P4S / Balai Benih Kopi\r\n                    </label>\r\n                    <div className=\"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-700\">\r\n                      {laporanData?.nama_p4s || \"-\"}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Kota */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Asal Kab/Kota\r\n                    </label>\r\n                    <div className=\"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-700\">\r\n                      {laporanData?.asal_kab_kota || \"-\"}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Jenis Kegiatan */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Jenis Kegiatan\r\n                    </label>\r\n                    <div className=\"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-700\">\r\n                      {jenisNama || \"-\"}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Asal Peserta */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Asal Peserta\r\n                    </label>\r\n                    <div className=\"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-700\">\r\n                      {layananData?.instansi_asal || \"-\"}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Jumlah Peserta */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Jumlah Peserta\r\n                    </label>\r\n                    <div className=\"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-700\">\r\n                      {layananData?.jumlah_peserta || \"-\"} orang\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Tanggal Pelaksanaan */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Tanggal Pelaksanaan\r\n                    </label>\r\n                    <div className=\"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-700\">\r\n                      {layananData?.tanggal_mulai\r\n                        ? formatDate(layananData.tanggal_mulai)\r\n                        : \"-\"}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Lama Pelaksanaan */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Lama Pelaksanaan\r\n                    </label>\r\n                    <div className=\"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-700\">\r\n                      1 hari\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Foto Kegiatan */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Foto Kegiatan\r\n                    </label>\r\n                    {fotoUrl ? (\r\n                      <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <div className=\"h-10 w-10 grid place-items-center rounded-lg bg-green-100 text-green-700\">\r\n                              <Check size={20} />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm font-medium text-green-800\">\r\n                                Foto Kegiatan Telah Diupload\r\n                              </p>\r\n                              <p className=\"text-xs text-green-600\">\r\n                                FotoKegiatan.jpg\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <button\r\n                              onClick={() => openFile(fotoUrl)}\r\n                              className=\"px-3 py-1.5 text-xs rounded-md border border-green-300 bg-white hover:bg-green-50 text-green-700 flex items-center gap-1\"\r\n                            >\r\n                              <Eye size={14} /> Lihat\r\n                            </button>\r\n                            <button\r\n                              onClick={() =>\r\n                                downloadFile(fotoUrl, \"FotoKegiatan.jpg\")\r\n                              }\r\n                              className=\"px-3 py-1.5 text-xs rounded-md bg-green-600 hover:bg-green-700 text-white flex items-center gap-1\"\r\n                            >\r\n                              <Download size={14} /> Download\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"text-sm text-gray-500 italic\">\r\n                        Tidak ada foto yang diupload\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })()}\r\n\r\n          {/* Sertifikat Section - HANYA untuk MOU workflow (PKL, Magang, Pelatihan) */}\r\n          {/* Undangan Narasumber & Kunjungan TIDAK ada sertifikat */}\r\n          {hasMouWorkflow &&\r\n            (() => {\r\n              const laporanData = Array.isArray(layananData?.laporan)\r\n                ? layananData.laporan[0]\r\n                : layananData?.laporan;\r\n              const hasLaporan = !!(laporanData?.id_laporan || laporanData?.id);\r\n\r\n              const sertifikatData = Array.isArray(layananData?.sertifikat)\r\n                ? layananData.sertifikat[0]\r\n                : layananData?.sertifikat;\r\n              const hasSertifikat = !!(\r\n                sertifikatData?.id || sertifikatData?.file_sertifikat\r\n              );\r\n\r\n              // Hanya tampilkan section sertifikat jika sudah ada laporan\r\n              if (!hasLaporan) return null;\r\n\r\n              return (\r\n                <div className=\"md:col-span-3 bg-white rounded-xl border border-gray-100 p-5 mt-6\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"h-12 w-12 grid place-items-center rounded-xl bg-amber-100 text-amber-700\">\r\n                        <Award size={24} />\r\n                      </div>\r\n                      <div>\r\n                        <h3 className=\"text-lg font-semibold\">\r\n                          Sertifikat Kegiatan\r\n                        </h3>\r\n                        <p className=\"text-sm text-gray-600\">\r\n                          {hasSertifikat\r\n                            ? \"Sertifikat telah diupload\"\r\n                            : \"Upload sertifikat untuk peserta\"}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    {hasSertifikat && (\r\n                      <div className=\"px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700 border border-green-200\">\r\n                         Tersedia\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {hasSertifikat ? (\r\n                    // Tampilkan sertifikat yang sudah diupload\r\n                    <div className=\"bg-gray-50 rounded-lg p-4 space-y-3\">\r\n                      {/* File Sertifikat */}\r\n                      {sertifikatData?.file_sertifikat && (\r\n                        <div className=\"bg-white rounded-xl border border-gray-100 p-3 flex items-center justify-between\">\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <div className=\"h-10 w-10 grid place-items-center rounded-md bg-amber-200 text-amber-700\">\r\n                              <Award size={20} />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm font-medium\">\r\n                                Sertifikat Kegiatan (File)\r\n                              </p>\r\n                              <p className=\"text-xs text-gray-500\">\r\n                                Sertifikat.pdf\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <button\r\n                              onClick={() => {\r\n                                const url = sertifikatData?.file_sertifikat;\r\n                                if (url) {\r\n                                  const fullUrl = url.startsWith(\"http\")\r\n                                    ? url\r\n                                    : `${\r\n                                        process.env.NEXT_PUBLIC_API_URL || \"\"\r\n                                      }${url}`;\r\n                                  window.open(fullUrl, \"_blank\");\r\n                                }\r\n                              }}\r\n                              className=\"px-3 py-1.5 text-xs rounded-md border border-gray-200 hover:bg-gray-50 flex items-center gap-1\"\r\n                            >\r\n                              <Eye size={14} /> Lihat\r\n                            </button>\r\n                            <button\r\n                              onClick={() => {\r\n                                const url = sertifikatData?.file_sertifikat;\r\n                                if (url) {\r\n                                  const fullUrl = url.startsWith(\"http\")\r\n                                    ? url\r\n                                    : `${\r\n                                        process.env.NEXT_PUBLIC_API_URL || \"\"\r\n                                      }${url}`;\r\n                                  const link = document.createElement(\"a\");\r\n                                  link.href = fullUrl;\r\n                                  link.download = \"Sertifikat.pdf\";\r\n                                  link.click();\r\n                                }\r\n                              }}\r\n                              className=\"px-3 py-1.5 text-xs rounded-md bg-gray-100 hover:bg-gray-200 flex items-center gap-1\"\r\n                            >\r\n                              <Download size={14} /> Download\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Link Sertifikat */}\r\n                      {sertifikatData?.link_sertifikat && (\r\n                        <div className=\"bg-white rounded-lg border border-gray-100 p-3\">\r\n                          <div className=\"flex items-center gap-2 mb-2\">\r\n                            <Award size={16} className=\"text-amber-700\" />\r\n                            <p className=\"text-xs font-medium text-gray-700\">\r\n                              Link Sertifikat:\r\n                            </p>\r\n                          </div>\r\n                          <a\r\n                            href={sertifikatData.link_sertifikat}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"text-sm text-blue-600 hover:text-blue-800 hover:underline break-all\"\r\n                          >\r\n                            {sertifikatData.link_sertifikat}\r\n                          </a>\r\n                          <div className=\"mt-2\">\r\n                            <a\r\n                              href={sertifikatData.link_sertifikat}\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                              className=\"inline-flex items-center gap-1 px-3 py-1.5 text-xs rounded-md bg-blue-600 text-white hover:bg-blue-700\"\r\n                            >\r\n                              <Eye size={14} /> Buka Link\r\n                            </a>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    // Form upload sertifikat\r\n                    <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                      <div className=\"space-y-4\">\r\n                        {/* Link Sertifikat (Optional) */}\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                            Link Sertifikat (Opsional)\r\n                          </label>\r\n                          <input\r\n                            type=\"url\"\r\n                            value={sertifikatLink}\r\n                            onChange={(e) => setSertifikatLink(e.target.value)}\r\n                            placeholder=\"https://...\"\r\n                            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500\"\r\n                          />\r\n                        </div>\r\n\r\n                        {/* File Upload */}\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                            File Sertifikat (PDF){\" \"}\r\n                            <span className=\"text-red-500\">*</span>\r\n                          </label>\r\n                          <input\r\n                            ref={fileInputRef}\r\n                            type=\"file\"\r\n                            accept=\".pdf\"\r\n                            onChange={handleSertifikatFileChange}\r\n                            className=\"hidden\"\r\n                          />\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <button\r\n                              onClick={() => fileInputRef.current?.click()}\r\n                              className=\"inline-flex items-center gap-2 px-4 py-2 text-sm rounded-md border border-gray-300 hover:bg-gray-50\"\r\n                            >\r\n                              <Upload size={16} /> Pilih File\r\n                            </button>\r\n                            {sertifikatFile && (\r\n                              <span className=\"text-sm text-gray-600\">\r\n                                {sertifikatFile.name}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                          <p className=\"text-xs text-gray-500 mt-1\">\r\n                            Format: PDF, Maksimal 10MB\r\n                          </p>\r\n                        </div>\r\n\r\n                        {/* Upload Button */}\r\n                        <div className=\"flex justify-end\">\r\n                          <button\r\n                            onClick={handleUploadSertifikat}\r\n                            disabled={!sertifikatFile || uploadingSertifikat}\r\n                            className={`inline-flex items-center gap-2 px-6 py-2.5 text-sm font-medium rounded-md text-white ${\r\n                              !sertifikatFile || uploadingSertifikat\r\n                                ? \"bg-gray-400 cursor-not-allowed\"\r\n                                : \"bg-amber-900 hover:bg-amber-950\"\r\n                            }`}\r\n                          >\r\n                            <Award size={16} />\r\n                            {uploadingSertifikat\r\n                              ? \"Mengupload...\"\r\n                              : \"Upload Sertifikat\"}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })()}\r\n        </div>\r\n\r\n        <p className=\"text-center text-xs text-gray-400 mt-8\">\r\n          ID Pengajuan: {String(params?.id)}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}